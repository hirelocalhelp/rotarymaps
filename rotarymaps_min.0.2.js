/*
 * RotaryMaps.js
 *
 * Distributed under the MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Created at thumbtack.com
 *
 */

/*
 * Raphael 1.5.2 - JavaScript Vector Library
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://raphaeljs.com/license.html) license.
 */
(function(){function aI(){if(aI.is(arguments[0],a7)){var b=arguments[0],d=F[bB](aI,b.splice(0,3+aI.is(b[0],aF))),R=d.set();for(var E=0,S=b[s];E<S;E++){var e=b[E]||{};bp[ag](e.type)&&R[k](d[e.type]().attr(e))}return R}return F[bB](aI,arguments)}aI.version="1.5.2";var a=/[, ]+/,bp={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},bn=/\{(\d+)\}/g,bE="prototype",ag="hasOwnProperty",aa=document,aQ=window,r={was:Object[bE][ag].call(aQ,"Raphael"),is:aQ.Raphael},bz=function(){this.customAttributes={}},aZ,bk="appendChild",bB="apply",bw="concat",W="createTouch" in aa,aP="",aH=" ",bC=String,I="split",Q="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[I](aH),bq={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},aW="join",s="length",bG=bC[bE].toLowerCase,ao=Math,m=ao.max,bi=ao.min,aq=ao.abs,bl=ao.pow,aM=ao.PI,aF="number",af="string",a7="array",a0="toString",a4="fill",aT=Object[bE][a0],bt={},k="push",h=/^url\(['"]?([^\)]+?)['"]?\)$/i,G=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,ap={"NaN":1,"Infinity":1,"-Infinity":1},c=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ad=ao.round,D="setAttribute",aj=parseFloat,T=parseInt,a5=" progid:DXImageTransform.Microsoft",bo=bC[bE].toUpperCase,q={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},am={along:"along",blur:aF,"clip-rect":"csv",cx:aF,cy:aF,fill:"colour","fill-opacity":aF,"font-size":aF,height:aF,opacity:aF,path:"path",r:aF,rotation:"csv",rx:aF,ry:aF,scale:"csv",stroke:"colour","stroke-opacity":aF,"stroke-width":aF,translation:"csv",width:aF,x:aF,y:aF},bs="replace",bf=/^(from|to|\d+%?)$/,bd=/\s*,\s*/,n={hs:1,rg:1},ba=/,?([achlmqrstvxz]),?/gi,aR=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,aG=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,aO=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,bm=function(e,d){return e.key-d.key};aI.type=(aQ.SVGAngle||aa.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");if(aI.type=="VML"){var ax=aa.createElement("div"),aB;ax.innerHTML='<v:shape adj="1"/>';aB=ax.firstChild;aB.style.behavior="url(#default#VML)";if(!(aB&&typeof aB.adj=="object")){return aI.type=null}ax=null}aI.svg=!(aI.vml=aI.type=="VML");bz[bE]=aI[bE];aZ=bz[bE];aI._id=0;aI._oid=0;aI.fn={};aI.is=function(d,b){b=bG.call(b);if(b=="finite"){return !ap[ag](+d)}return(b=="null"&&d===null)||(b==typeof d)||(b=="object"&&d===Object(d))||(b=="array"&&Array.isArray&&Array.isArray(d))||aT.call(d).slice(8,-1).toLowerCase()==b};aI.angle=function(R,bH,e,S,d,E){if(d==null){var b=R-e,bI=bH-S;if(!b&&!bI){return 0}return((b<0)*180+ao.atan(-bI/-b)*180/aM+360)%360}else{return aI.angle(R,bH,d,E)-aI.angle(e,S,d,E)}};aI.rad=function(b){return b%360*aM/180};aI.deg=function(b){return b*180/aM%360};aI.snapTo=function(d,E,b){b=aI.is(b,"finite")?b:10;if(aI.is(d,a7)){var e=d.length;while(e--){if(aq(d[e]-E)<=b){return d[e]}}}else{d=+d;var R=E%d;if(R<b){return E-R}if(R>d-b){return E-R+d}}return E};function j(){var d=[],b=0;for(;b<32;b++){d[b]=(~~(ao.random()*16))[a0](16)}d[12]=4;d[16]=((d[16]&3)|8)[a0](16);return"r-"+d[aW]("")}aI.setWindow=function(b){aQ=b;aa=aQ.document};var a9=function(E){if(aI.vml){var b=/^\s+|\s+$/g;var S;try{var bH=new ActiveXObject("htmlfile");bH.write("<body>");bH.close();S=bH.body}catch(bI){S=createPopup().document.body}var d=S.createTextRange();a9=aA(function(bJ){try{S.style.color=bC(bJ)[bs](b,aP);var bK=d.queryCommandValue("ForeColor");bK=((bK&255)<<16)|(bK&65280)|((bK&16711680)>>>16);return"#"+("000000"+bK[a0](16)).slice(-6)}catch(bL){return"none"}})}else{var R=aa.createElement("i");R.title="Rapha\xebl Colour Picker";R.style.display="none";aa.body[bk](R);a9=aA(function(e){R.style.color=e;return aa.defaultView.getComputedStyle(R,aP).getPropertyValue("color")})}return a9(E)},aC=function(){return"hsb("+[this.h,this.s,this.b]+")"},M=function(){return"hsl("+[this.h,this.s,this.l]+")"},B=function(){return this.hex};aI.hsb2rgb=function(E,e,d,R){if(aI.is(E,"object")&&"h" in E&&"s" in E&&"b" in E){d=E.b;e=E.s;E=E.h;R=E.o}return aI.hsl2rgb(E,e,d/2,R)};aI.hsl2rgb=function(bH,bO,E,e){if(aI.is(bH,"object")&&"h" in bH&&"s" in bH&&"l" in bH){E=bH.l;bO=bH.s;bH=bH.h}if(bH>1||bO>1||E>1){bH/=360;bO/=100;E/=100}var bM={},bJ=["r","g","b"],bI,bL,S,d,bK,bN;if(!bO){bM={r:E,g:E,b:E}}else{if(E<0.5){bI=E*(1+bO)}else{bI=E+bO-E*bO}bL=2*E-bI;for(var R=0;R<3;R++){S=bH+1/3*-(R-1);S<0&&S++;S>1&&S--;if(S*6<1){bM[bJ[R]]=bL+(bI-bL)*6*S}else{if(S*2<1){bM[bJ[R]]=bI}else{if(S*3<2){bM[bJ[R]]=bL+(bI-bL)*(2/3-S)*6}else{bM[bJ[R]]=bL}}}}}bM.r*=255;bM.g*=255;bM.b*=255;bM.hex="#"+(16777216|bM.b|(bM.g<<8)|(bM.r<<16)).toString(16).slice(1);aI.is(e,"finite")&&(bM.opacity=e);bM.toString=B;return bM};aI.rgb2hsb=function(b,d,bI){if(d==null&&aI.is(b,"object")&&"r" in b&&"g" in b&&"b" in b){bI=b.b;d=b.g;b=b.r}if(d==null&&aI.is(b,af)){var bK=aI.getRGB(b);b=bK.r;d=bK.g;bI=bK.b}if(b>1||d>1||bI>1){b/=255;d/=255;bI/=255}var bH=m(b,d,bI),e=bi(b,d,bI),R,E,S=bH;if(e==bH){return{h:0,s:0,b:bH,toString:aC}}else{var bJ=(bH-e);E=bJ/bH;if(b==bH){R=(d-bI)/bJ}else{if(d==bH){R=2+((bI-b)/bJ)}else{R=4+((b-d)/bJ)}}R/=6;R<0&&R++;R>1&&R--}return{h:R,s:E,b:S,toString:aC}};aI.rgb2hsl=function(d,e,bH){if(e==null&&aI.is(d,"object")&&"r" in d&&"g" in d&&"b" in d){bH=d.b;e=d.g;d=d.r}if(e==null&&aI.is(d,af)){var bL=aI.getRGB(d);d=bL.r;e=bL.g;bH=bL.b}if(d>1||e>1||bH>1){d/=255;e/=255;bH/=255}var S=m(d,e,bH),E=bi(d,e,bH),R,bK,b=(S+E)/2,bJ;if(E==S){bJ={h:0,s:0,l:b}}else{var bI=S-E;bK=b<0.5?bI/(S+E):bI/(2-S-E);if(d==S){R=(e-bH)/bI}else{if(e==S){R=2+(bH-d)/bI}else{R=4+(d-e)/bI}}R/=6;R<0&&R++;R>1&&R--;bJ={h:R,s:bK,l:b}}bJ.toString=M;return bJ};aI._path2string=function(){return this.join(",")[bs](ba,"$1")};function aA(E,d,b){function e(){var R=Array[bE].slice.call(arguments,0),bH=R[aW]("\u25ba"),S=e.cache=e.cache||{},bI=e.count=e.count||[];if(S[ag](bH)){return b?b(S[bH]):S[bH]}bI[s]>=1000&&delete S[bI.shift()];bI[k](bH);S[bH]=E[bB](d,R);return b?b(S[bH]):S[bH]}return e}aI.getRGB=aA(function(b){if(!b||!!((b=bC(b)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1}}if(b=="none"){return{r:-1,g:-1,b:-1,hex:"none"}}!(n[ag](b.toLowerCase().substring(0,2))||b.charAt()=="#")&&(b=a9(b));var R,d,e,bH,E,bJ,bI,S=b.match(G);if(S){if(S[2]){bH=T(S[2].substring(5),16);e=T(S[2].substring(3,5),16);d=T(S[2].substring(1,3),16)}if(S[3]){bH=T((bJ=S[3].charAt(3))+bJ,16);e=T((bJ=S[3].charAt(2))+bJ,16);d=T((bJ=S[3].charAt(1))+bJ,16)}if(S[4]){bI=S[4][I](bd);d=aj(bI[0]);bI[0].slice(-1)=="%"&&(d*=2.55);e=aj(bI[1]);bI[1].slice(-1)=="%"&&(e*=2.55);bH=aj(bI[2]);bI[2].slice(-1)=="%"&&(bH*=2.55);S[1].toLowerCase().slice(0,4)=="rgba"&&(E=aj(bI[3]));bI[3]&&bI[3].slice(-1)=="%"&&(E/=100)}if(S[5]){bI=S[5][I](bd);d=aj(bI[0]);bI[0].slice(-1)=="%"&&(d*=2.55);e=aj(bI[1]);bI[1].slice(-1)=="%"&&(e*=2.55);bH=aj(bI[2]);bI[2].slice(-1)=="%"&&(bH*=2.55);(bI[0].slice(-3)=="deg"||bI[0].slice(-1)=="\xb0")&&(d/=360);S[1].toLowerCase().slice(0,4)=="hsba"&&(E=aj(bI[3]));bI[3]&&bI[3].slice(-1)=="%"&&(E/=100);return aI.hsb2rgb(d,e,bH,E)}if(S[6]){bI=S[6][I](bd);d=aj(bI[0]);bI[0].slice(-1)=="%"&&(d*=2.55);e=aj(bI[1]);bI[1].slice(-1)=="%"&&(e*=2.55);bH=aj(bI[2]);bI[2].slice(-1)=="%"&&(bH*=2.55);(bI[0].slice(-3)=="deg"||bI[0].slice(-1)=="\xb0")&&(d/=360);S[1].toLowerCase().slice(0,4)=="hsla"&&(E=aj(bI[3]));bI[3]&&bI[3].slice(-1)=="%"&&(E/=100);return aI.hsl2rgb(d,e,bH,E)}S={r:d,g:e,b:bH};S.hex="#"+(16777216|bH|(e<<8)|(d<<16)).toString(16).slice(1);aI.is(E,"finite")&&(S.opacity=E);return S}return{r:-1,g:-1,b:-1,hex:"none",error:1}},aI);aI.getColor=function(d){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:d||0.75},b=this.hsb2rgb(e.h,e.s,e.b);e.h+=0.075;if(e.h>1){e.h=0;e.s-=0.2;e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})}return b.hex};aI.getColor.reset=function(){delete this.start};aI.parsePathString=aA(function(b){if(!b){return null}var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},d=[];if(aI.is(b,a7)&&aI.is(b[0],a7)){d=aS(b)}if(!d[s]){bC(b)[bs](aR,function(R,E,bI){var bH=[],S=bG.call(E);bI[bs](aG,function(bK,bJ){bJ&&bH[k](+bJ)});if(S=="m"&&bH[s]>2){d[k]([E][bw](bH.splice(0,2)));S="l";E=E=="m"?"l":"L"}while(bH[s]>=e[S]){d[k]([E][bw](bH.splice(0,e[S])));if(!e[S]){break}}})}d[a0]=aI._path2string;return d});aI.findDotsAtSegment=function(d,b,bV,bT,bH,R,bJ,bI,bP){var bN=1-bP,bM=bl(bN,3)*d+bl(bN,2)*3*bP*bV+bN*3*bP*bP*bH+bl(bP,3)*bJ,bK=bl(bN,3)*b+bl(bN,2)*3*bP*bT+bN*3*bP*bP*R+bl(bP,3)*bI,bR=d+2*bP*(bV-d)+bP*bP*(bH-2*bV+d),bQ=b+2*bP*(bT-b)+bP*bP*(R-2*bT+b),bU=bV+2*bP*(bH-bV)+bP*bP*(bJ-2*bH+bV),bS=bT+2*bP*(R-bT)+bP*bP*(bI-2*R+bT),bO=(1-bP)*d+bP*bV,bL=(1-bP)*b+bP*bT,E=(1-bP)*bH+bP*bJ,e=(1-bP)*R+bP*bI,S=(90-ao.atan((bR-bU)/(bQ-bS))*180/aM);(bR>bU||bQ<bS)&&(S+=180);return{x:bM,y:bK,m:{x:bR,y:bQ},n:{x:bU,y:bS},start:{x:bO,y:bL},end:{x:E,y:e},alpha:S}};var ai=aA(function(bL){if(!bL){return{x:0,y:0,width:0,height:0}}bL=V(bL);var bI=0,bH=0,E=[],d=[],e;for(var R=0,bK=bL[s];R<bK;R++){e=bL[R];if(e[0]=="M"){bI=e[1];bH=e[2];E[k](bI);d[k](bH)}else{var S=a6(bI,bH,e[1],e[2],e[3],e[4],e[5],e[6]);E=E[bw](S.min.x,S.max.x);d=d[bw](S.min.y,S.max.y);bI=e[5];bH=e[6]}}var b=bi[bB](0,E),bJ=bi[bB](0,d);return{x:b,y:bJ,width:m[bB](0,E)-b,height:m[bB](0,d)-bJ}}),aS=function(S){var e=[];if(!aI.is(S,a7)||!aI.is(S&&S[0],a7)){S=aI.parsePathString(S)}for(var d=0,E=S[s];d<E;d++){e[d]=[];for(var b=0,R=S[d][s];b<R;b++){e[d][b]=S[d][b]}}e[a0]=aI._path2string;return e},au=aA(function(E){if(!aI.is(E,a7)||!aI.is(E&&E[0],a7)){E=aI.parsePathString(E)}var bK=[],bM=0,bL=0,bP=0,bO=0,e=0;if(E[0][0]=="M"){bM=E[0][1];bL=E[0][2];bP=bM;bO=bL;e++;bK[k](["M",bM,bL])}for(var bH=e,bQ=E[s];bH<bQ;bH++){var b=bK[bH]=[],bN=E[bH];if(bN[0]!=bG.call(bN[0])){b[0]=bG.call(bN[0]);switch(b[0]){case"a":b[1]=bN[1];b[2]=bN[2];b[3]=bN[3];b[4]=bN[4];b[5]=bN[5];b[6]=+(bN[6]-bM).toFixed(3);b[7]=+(bN[7]-bL).toFixed(3);break;case"v":b[1]=+(bN[1]-bL).toFixed(3);break;case"m":bP=bN[1];bO=bN[2];default:for(var S=1,bI=bN[s];S<bI;S++){b[S]=+(bN[S]-((S%2)?bM:bL)).toFixed(3)}}}else{b=bK[bH]=[];if(bN[0]=="m"){bP=bN[1]+bM;bO=bN[2]+bL}for(var R=0,d=bN[s];R<d;R++){bK[bH][R]=bN[R]}}var bJ=bK[bH][s];switch(bK[bH][0]){case"z":bM=bP;bL=bO;break;case"h":bM+=+bK[bH][bJ-1];break;case"v":bL+=+bK[bH][bJ-1];break;default:bM+=+bK[bH][bJ-2];bL+=+bK[bH][bJ-1]}}bK[a0]=aI._path2string;return bK},0,aS),y=aA(function(E){if(!aI.is(E,a7)||!aI.is(E&&E[0],a7)){E=aI.parsePathString(E)}var bJ=[],bL=0,bK=0,bO=0,bN=0,e=0;if(E[0][0]=="M"){bL=+E[0][1];bK=+E[0][2];bO=bL;bN=bK;e++;bJ[0]=["M",bL,bK]}for(var bH=e,bP=E[s];bH<bP;bH++){var b=bJ[bH]=[],bM=E[bH];if(bM[0]!=bo.call(bM[0])){b[0]=bo.call(bM[0]);switch(b[0]){case"A":b[1]=bM[1];b[2]=bM[2];b[3]=bM[3];b[4]=bM[4];b[5]=bM[5];b[6]=+(bM[6]+bL);b[7]=+(bM[7]+bK);break;case"V":b[1]=+bM[1]+bK;break;case"H":b[1]=+bM[1]+bL;break;case"M":bO=+bM[1]+bL;bN=+bM[2]+bK;default:for(var S=1,bI=bM[s];S<bI;S++){b[S]=+bM[S]+((S%2)?bL:bK)}}}else{for(var R=0,d=bM[s];R<d;R++){bJ[bH][R]=bM[R]}}switch(b[0]){case"Z":bL=bO;bK=bN;break;case"H":bL=b[1];break;case"V":bK=b[1];break;case"M":bO=bJ[bH][bJ[bH][s]-2];bN=bJ[bH][bJ[bH][s]-1];default:bL=bJ[bH][bJ[bH][s]-2];bK=bJ[bH][bJ[bH][s]-1]}}bJ[a0]=aI._path2string;return bJ},null,aS),bD=function(d,E,b,e){return[d,E,b,e,b,e]},bj=function(d,E,bH,R,b,e){var S=1/3,bI=2/3;return[S*d+bI*bH,S*E+bI*R,S*b+bI*bH,S*e+bI*R,b,e]},Z=function(bO,cj,bX,bV,bP,bJ,E,bN,ci,bQ){var bU=aM*120/180,b=aM/180*(+bP||0),b1=[],bY,cf=aA(function(cl,co,ck){var cn=cl*ao.cos(ck)-co*ao.sin(ck),cm=cl*ao.sin(ck)+co*ao.cos(ck);return{x:cn,y:cm}});if(!bQ){bY=cf(bO,cj,-b);bO=bY.x;cj=bY.y;bY=cf(bN,ci,-b);bN=bY.x;ci=bY.y;var d=ao.cos(aM/180*bP),bL=ao.sin(aM/180*bP),b3=(bO-bN)/2,b2=(cj-ci)/2;var cd=(b3*b3)/(bX*bX)+(b2*b2)/(bV*bV);if(cd>1){cd=ao.sqrt(cd);bX=cd*bX;bV=cd*bV}var e=bX*bX,b6=bV*bV,b8=(bJ==E?-1:1)*ao.sqrt(aq((e*b6-e*b2*b2-b6*b3*b3)/(e*b2*b2+b6*b3*b3))),bS=b8*bX*b2/bV+(bO+bN)/2,bR=b8*-bV*b3/bX+(cj+ci)/2,bI=ao.asin(((cj-bR)/bV).toFixed(9)),bH=ao.asin(((ci-bR)/bV).toFixed(9));bI=bO<bS?aM-bI:bI;bH=bN<bS?aM-bH:bH;bI<0&&(bI=aM*2+bI);bH<0&&(bH=aM*2+bH);if(E&&bI>bH){bI=bI-aM*2}if(!E&&bH>bI){bH=bH-aM*2}}else{bI=bQ[0];bH=bQ[1];bS=bQ[2];bR=bQ[3]}var bM=bH-bI;if(aq(bM)>bU){var bT=bH,bW=bN,bK=ci;bH=bI+bU*(E&&bH>bI?1:-1);bN=bS+bX*ao.cos(bH);ci=bR+bV*ao.sin(bH);b1=Z(bN,ci,bX,bV,bP,0,E,bW,bK,[bH,bT,bS,bR])}bM=bH-bI;var S=ao.cos(bI),ch=ao.sin(bI),R=ao.cos(bH),cg=ao.sin(bH),b4=ao.tan(bM/4),b7=4/3*bX*b4,b5=4/3*bV*b4,ce=[bO,cj],cc=[bO+b7*ch,cj-b5*S],cb=[bN+b7*cg,ci-b5*R],b9=[bN,ci];cc[0]=2*ce[0]-cc[0];cc[1]=2*ce[1]-cc[1];if(bQ){return[cc,cb,b9][bw](b1)}else{b1=[cc,cb,b9][bw](b1)[aW]()[I](",");var bZ=[];for(var ca=0,b0=b1[s];ca<b0;ca++){bZ[ca]=ca%2?cf(b1[ca-1],b1[ca],b).y:cf(b1[ca],b1[ca+1],b).x}return bZ}},ac=function(d,b,E,e,bJ,bI,bH,S,bK){var R=1-bK;return{x:bl(R,3)*d+bl(R,2)*3*bK*E+R*3*bK*bK*bJ+bl(bK,3)*bH,y:bl(R,3)*b+bl(R,2)*3*bK*e+R*3*bK*bK*bI+bl(bK,3)*S}},a6=aA(function(E,d,S,R,bR,bQ,bN,bK){var bP=(bR-2*S+E)-(bN-2*bR+S),bM=2*(S-E)-2*(bR-S),bJ=E-S,bI=(-bM+ao.sqrt(bM*bM-4*bP*bJ))/2/bP,bH=(-bM-ao.sqrt(bM*bM-4*bP*bJ))/2/bP,bL=[d,bK],bO=[E,bN],e;aq(bI)>"1e12"&&(bI=0.5);aq(bH)>"1e12"&&(bH=0.5);if(bI>0&&bI<1){e=ac(E,d,S,R,bR,bQ,bN,bK,bI);bO[k](e.x);bL[k](e.y)}if(bH>0&&bH<1){e=ac(E,d,S,R,bR,bQ,bN,bK,bH);bO[k](e.x);bL[k](e.y)}bP=(bQ-2*R+d)-(bK-2*bQ+R);bM=2*(R-d)-2*(bQ-R);bJ=d-R;bI=(-bM+ao.sqrt(bM*bM-4*bP*bJ))/2/bP;bH=(-bM-ao.sqrt(bM*bM-4*bP*bJ))/2/bP;aq(bI)>"1e12"&&(bI=0.5);aq(bH)>"1e12"&&(bH=0.5);if(bI>0&&bI<1){e=ac(E,d,S,R,bR,bQ,bN,bK,bI);bO[k](e.x);bL[k](e.y)}if(bH>0&&bH<1){e=ac(E,d,S,R,bR,bQ,bN,bK,bH);bO[k](e.x);bL[k](e.y)}return{min:{x:bi[bB](0,bO),y:bi[bB](0,bL)},max:{x:m[bB](0,bO),y:m[bB](0,bL)}}}),V=aA(function(bP,bK){var E=y(bP),bL=bK&&y(bK),bM={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},S=function(bR,bS){var bQ,bT;if(!bR){return["C",bS.x,bS.y,bS.x,bS.y,bS.x,bS.y]}!(bR[0] in {T:1,Q:1})&&(bS.qx=bS.qy=null);switch(bR[0]){case"M":bS.X=bR[1];bS.Y=bR[2];break;case"A":bR=["C"][bw](Z[bB](0,[bS.x,bS.y][bw](bR.slice(1))));break;case"S":bQ=bS.x+(bS.x-(bS.bx||bS.x));bT=bS.y+(bS.y-(bS.by||bS.y));bR=["C",bQ,bT][bw](bR.slice(1));break;case"T":bS.qx=bS.x+(bS.x-(bS.qx||bS.x));bS.qy=bS.y+(bS.y-(bS.qy||bS.y));bR=["C"][bw](bj(bS.x,bS.y,bS.qx,bS.qy,bR[1],bR[2]));break;case"Q":bS.qx=bR[1];bS.qy=bR[2];bR=["C"][bw](bj(bS.x,bS.y,bR[1],bR[2],bR[3],bR[4]));break;case"L":bR=["C"][bw](bD(bS.x,bS.y,bR[1],bR[2]));break;case"H":bR=["C"][bw](bD(bS.x,bS.y,bR[1],bS.y));break;case"V":bR=["C"][bw](bD(bS.x,bS.y,bS.x,bR[1]));break;case"Z":bR=["C"][bw](bD(bS.x,bS.y,bS.X,bS.Y));break}return bR},d=function(bQ,bR){if(bQ[bR][s]>7){bQ[bR].shift();var bS=bQ[bR];while(bS[s]){bQ.splice(bR++,0,["C"][bw](bS.splice(0,6)))}bQ.splice(bR,1);bN=m(E[s],bL&&bL[s]||0)}},e=function(bU,bT,bR,bQ,bS){if(bU&&bT&&bU[bS][0]=="M"&&bT[bS][0]!="M"){bT.splice(bS,0,["M",bQ.x,bQ.y]);bR.bx=0;bR.by=0;bR.x=bU[bS][1];bR.y=bU[bS][2];bN=m(E[s],bL&&bL[s]||0)}};for(var bI=0,bN=m(E[s],bL&&bL[s]||0);bI<bN;bI++){E[bI]=S(E[bI],bM);d(E,bI);bL&&(bL[bI]=S(bL[bI],b));bL&&d(bL,bI);e(E,bL,bM,b,bI);e(bL,E,b,bM,bI);var bH=E[bI],bO=bL&&bL[bI],R=bH[s],bJ=bL&&bO[s];bM.x=bH[R-2];bM.y=bH[R-1];bM.bx=aj(bH[R-4])||bM.x;bM.by=aj(bH[R-3])||bM.y;b.bx=bL&&(aj(bO[bJ-4])||b.x);b.by=bL&&(aj(bO[bJ-3])||b.y);b.x=bL&&bO[bJ-2];b.y=bL&&bO[bJ-1]}return bL?[E,bL]:E},null,aS),w=aA(function(bK){var bJ=[];for(var S=0,bL=bK[s];S<bL;S++){var b={},bI=bK[S].match(/^([^:]*):?([\d\.]*)/);b.color=aI.getRGB(bI[1]);if(b.color.error){return null}b.color=b.color.hex;bI[2]&&(b.offset=bI[2]+"%");bJ[k](b)}for(S=1,bL=bJ[s]-1;S<bL;S++){if(!bJ[S].offset){var e=aj(bJ[S-1].offset||0),E=0;for(var R=S+1;R<bL;R++){if(bJ[R].offset){E=bJ[R].offset;break}}if(!E){E=100;R=bL}E=aj(E);var bH=(E-e)/(R-S+1);for(;S<R;S++){e+=bH;bJ[S].offset=e+"%"}}}return bJ}),aJ=function(b,R,e,E){var d;if(aI.is(b,af)||aI.is(b,"object")){d=aI.is(b,af)?aa.getElementById(b):b;if(d.tagName){if(R==null){return{container:d,width:d.style.pixelWidth||d.offsetWidth,height:d.style.pixelHeight||d.offsetHeight}}else{return{container:d,width:R,height:e}}}}else{return{container:1,x:b,y:R,width:e,height:E}}},be=function(b,e){var d=this;for(var E in e){if(e[ag](E)&&!(E in b)){switch(typeof e[E]){case"function":(function(R){b[E]=b===d?R:function(){return R[bB](d,arguments)}})(e[E]);break;case"object":b[E]=b[E]||{};be.call(this,b[E],e[E]);break;default:b[E]=e[E];break}}}},aE=function(b,d){b==d.top&&(d.top=b.prev);b==d.bottom&&(d.bottom=b.next);b.next&&(b.next.prev=b.prev);b.prev&&(b.prev.next=b.next)},al=function(b,d){if(d.top===b){return}aE(b,d);b.next=null;b.prev=d.top;d.top.next=b;d.top=b},p=function(b,d){if(d.bottom===b){return}aE(b,d);b.next=d.bottom;b.prev=null;d.bottom.prev=b;d.bottom=b},J=function(d,b,e){aE(d,e);b==e.top&&(e.top=d);b.next&&(b.next.prev=d);d.next=b.next;d.prev=b;b.next=d},aL=function(d,b,e){aE(d,e);b==e.bottom&&(e.bottom=d);b.prev&&(b.prev.next=d);d.prev=b.prev;b.prev=d;d.next=b},z=function(b){return function(){throw new Error("Rapha\xebl: you are calling to method \u201c"+b+"\u201d of removed object")}};aI.pathToRelative=au;if(aI.svg){aZ.svgns="http://www.w3.org/2000/svg";aZ.xlink="http://www.w3.org/1999/xlink";ad=function(b){return +b+(~~b===b)*0.5};var bh=function(e,b){if(b){for(var d in b){if(b[ag](d)){e[D](d,bC(b[d]))}}}else{e=aa.createElementNS(aZ.svgns,e);e.style.webkitTapHighlightColor="rgba(0,0,0,0)";return e}};aI[a0]=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var x=function(b,E){var d=bh("path");E.canvas&&E.canvas[bk](d);var e=new aU(d,E);e.type="path";an(e,{fill:"none",stroke:"#000",path:b});return e};var g=function(E,bO,b){var bL="linear",bI=0.5,S=0.5,bQ=E.style;bO=bC(bO)[bs](aO,function(bT,bR,bU){bL="radial";if(bR&&bU){bI=aj(bR);S=aj(bU);var bS=((S>0.5)*2-1);bl(bI-0.5,2)+bl(S-0.5,2)>0.25&&(S=ao.sqrt(0.25-bl(bI-0.5,2))*bS+0.5)&&S!=0.5&&(S=S.toFixed(5)-0.00001*bS)}return aP});bO=bO[I](/\s*\-\s*/);if(bL=="linear"){var bH=bO.shift();bH=-aj(bH);if(isNaN(bH)){return null}var R=[0,0,ao.cos(bH*aM/180),ao.sin(bH*aM/180)],bN=1/(m(aq(R[2]),aq(R[3]))||1);R[2]*=bN;R[3]*=bN;if(R[2]<0){R[0]=-R[2];R[2]=0}if(R[3]<0){R[1]=-R[3];R[3]=0}}var bK=w(bO);if(!bK){return null}var d=E.getAttribute(a4);d=d.match(/^url\(#(.*)\)$/);d&&b.defs.removeChild(aa.getElementById(d[1]));var e=bh(bL+"Gradient");e.id=j();bh(e,bL=="radial"?{fx:bI,fy:S}:{x1:R[0],y1:R[1],x2:R[2],y2:R[3]});b.defs[bk](e);for(var bJ=0,bP=bK[s];bJ<bP;bJ++){var bM=bh("stop");bh(bM,{offset:bK[bJ].offset?bK[bJ].offset:!bJ?"0%":"100%","stop-color":bK[bJ].color||"#fff"});e[bk](bM)}bh(E,{fill:"url(#"+e.id+")",opacity:1,"fill-opacity":1});bQ.fill=aP;bQ.opacity=1;bQ.fillOpacity=1;return 1};var ab=function(d){var b=d.getBBox();bh(d.pattern,{patternTransform:aI.format("translate({0},{1})",b.x,b.y)})};var an=function(bO,bX){var bR={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},bT=bO.node,bP=bO.attrs,bL=bO.rotate(),bH=function(b4,b3){b3=bR[bG.call(b3)];if(b3){var b1=b4.attrs["stroke-width"]||"1",bZ={round:b1,square:b1,butt:0}[b4.attrs["stroke-linecap"]||bX["stroke-linecap"]]||0,b2=[];var b0=b3[s];while(b0--){b2[b0]=b3[b0]*b1+((b0%2)?1:-1)*bZ}bh(bT,{"stroke-dasharray":b2[aW](",")})}};bX[ag]("rotation")&&(bL=bX.rotation);var bK=bC(bL)[I](a);if(!(bK.length-1)){bK=null}else{bK[1]=+bK[1];bK[2]=+bK[2]}aj(bL)&&bO.rotate(0,true);for(var bS in bX){if(bX[ag](bS)){if(!q[ag](bS)){continue}var bQ=bX[bS];bP[bS]=bQ;switch(bS){case"blur":bO.blur(bQ);break;case"rotation":bO.rotate(bQ,true);break;case"href":case"title":case"target":var bV=bT.parentNode;if(bG.call(bV.tagName)!="a"){var R=bh("a");bV.insertBefore(R,bT);R[bk](bT);bV=R}if(bS=="target"&&bQ=="blank"){bV.setAttributeNS(bO.paper.xlink,"show","new")}else{bV.setAttributeNS(bO.paper.xlink,bS,bQ)}break;case"cursor":bT.style.cursor=bQ;break;case"clip-rect":var d=bC(bQ)[I](a);if(d[s]==4){bO.clip&&bO.clip.parentNode.parentNode.removeChild(bO.clip.parentNode);var e=bh("clipPath"),bU=bh("rect");e.id=j();bh(bU,{x:d[0],y:d[1],width:d[2],height:d[3]});e[bk](bU);bO.paper.defs[bk](e);bh(bT,{"clip-path":"url(#"+e.id+")"});bO.clip=bU}if(!bQ){var bW=aa.getElementById(bT.getAttribute("clip-path")[bs](/(^url\(#|\)$)/g,aP));bW&&bW.parentNode.removeChild(bW);bh(bT,{"clip-path":aP});delete bO.clip}break;case"path":if(bO.type=="path"){bh(bT,{d:bQ?bP.path=y(bQ):"M0,0"})}break;case"width":bT[D](bS,bQ);if(bP.fx){bS="x";bQ=bP.x}else{break}case"x":if(bP.fx){bQ=-bP.x-(bP.width||0)}case"rx":if(bS=="rx"&&bO.type=="rect"){break}case"cx":bK&&(bS=="x"||bS=="cx")&&(bK[1]+=bQ-bP[bS]);bT[D](bS,bQ);bO.pattern&&ab(bO);break;case"height":bT[D](bS,bQ);if(bP.fy){bS="y";bQ=bP.y}else{break}case"y":if(bP.fy){bQ=-bP.y-(bP.height||0)}case"ry":if(bS=="ry"&&bO.type=="rect"){break}case"cy":bK&&(bS=="y"||bS=="cy")&&(bK[2]+=bQ-bP[bS]);bT[D](bS,bQ);bO.pattern&&ab(bO);break;case"r":if(bO.type=="rect"){bh(bT,{rx:bQ,ry:bQ})}else{bT[D](bS,bQ)}break;case"src":if(bO.type=="image"){bT.setAttributeNS(bO.paper.xlink,"href",bQ)}break;case"stroke-width":bT.style.strokeWidth=bQ;bT[D](bS,bQ);if(bP["stroke-dasharray"]){bH(bO,bP["stroke-dasharray"])}break;case"stroke-dasharray":bH(bO,bQ);break;case"translation":var bI=bC(bQ)[I](a);bI[0]=+bI[0]||0;bI[1]=+bI[1]||0;if(bK){bK[1]+=bI[0];bK[2]+=bI[1]}A.call(bO,bI[0],bI[1]);break;case"scale":bI=bC(bQ)[I](a);bO.scale(+bI[0]||1,+bI[1]||+bI[0]||1,isNaN(aj(bI[2]))?null:+bI[2],isNaN(aj(bI[3]))?null:+bI[3]);break;case a4:var S=bC(bQ).match(h);if(S){e=bh("pattern");var bN=bh("image");e.id=j();bh(e,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});bh(bN,{x:0,y:0});bN.setAttributeNS(bO.paper.xlink,"href",S[1]);e[bk](bN);var bY=aa.createElement("img");bY.style.cssText="position:absolute;left:-9999em;top-9999em";bY.onload=function(){bh(e,{width:this.offsetWidth,height:this.offsetHeight});bh(bN,{width:this.offsetWidth,height:this.offsetHeight});aa.body.removeChild(this);bO.paper.safari()};aa.body[bk](bY);bY.src=S[1];bO.paper.defs[bk](e);bT.style.fill="url(#"+e.id+")";bh(bT,{fill:"url(#"+e.id+")"});bO.pattern=e;bO.pattern&&ab(bO);break}var E=aI.getRGB(bQ);if(!E.error){delete bX.gradient;delete bP.gradient;!aI.is(bP.opacity,"undefined")&&aI.is(bX.opacity,"undefined")&&bh(bT,{opacity:bP.opacity});!aI.is(bP["fill-opacity"],"undefined")&&aI.is(bX["fill-opacity"],"undefined")&&bh(bT,{"fill-opacity":bP["fill-opacity"]})}else{if((({circle:1,ellipse:1})[ag](bO.type)||bC(bQ).charAt()!="r")&&g(bT,bQ,bO.paper)){bP.gradient=bQ;bP.fill="none";break}}E[ag]("opacity")&&bh(bT,{"fill-opacity":E.opacity>1?E.opacity/100:E.opacity});case"stroke":E=aI.getRGB(bQ);bT[D](bS,E.hex);bS=="stroke"&&E[ag]("opacity")&&bh(bT,{"stroke-opacity":E.opacity>1?E.opacity/100:E.opacity});break;case"gradient":(({circle:1,ellipse:1})[ag](bO.type)||bC(bQ).charAt()!="r")&&g(bT,bQ,bO.paper);break;case"opacity":if(bP.gradient&&!bP[ag]("stroke-opacity")){bh(bT,{"stroke-opacity":bQ>1?bQ/100:bQ})}case"fill-opacity":if(bP.gradient){var b=aa.getElementById(bT.getAttribute(a4)[bs](/^url\(#|\)$/g,aP));if(b){var bJ=b.getElementsByTagName("stop");bJ[bJ[s]-1][D]("stop-opacity",bQ)}break}default:bS=="font-size"&&(bQ=T(bQ,10)+"px");var bM=bS[bs](/(\-.)/g,function(bZ){return bo.call(bZ.substring(1))});bT.style[bM]=bQ;bT[D](bS,bQ);break}}}P(bO,bX);if(bK){bO.rotate(bK.join(aH))}else{aj(bL)&&bO.rotate(bL,true)}};var o=1.2,P=function(b,E){if(b.type!="text"||!(E[ag]("text")||E[ag]("font")||E[ag]("font-size")||E[ag]("x")||E[ag]("y"))){return}var bJ=b.attrs,d=b.node,bL=d.firstChild?T(aa.defaultView.getComputedStyle(d.firstChild,aP).getPropertyValue("font-size"),10):10;if(E[ag]("text")){bJ.text=E.text;while(d.firstChild){d.removeChild(d.firstChild)}var e=bC(E.text)[I]("\n");for(var R=0,bK=e[s];R<bK;R++){if(e[R]){var bH=bh("tspan");R&&bh(bH,{dy:bL*o,x:bJ.x});bH[bk](aa.createTextNode(e[R]));d[bk](bH)}}}else{e=d.getElementsByTagName("tspan");for(R=0,bK=e[s];R<bK;R++){R&&bh(e[R],{dy:bL*o,x:bJ.x})}}bh(d,{y:bJ.y});var S=b.getBBox(),bI=bJ.y-(S.y+S.height/2);bI&&aI.is(bI,"finite")&&bh(d,{y:bJ.y+bI})},aU=function(d,b){var E=0,e=0;this[0]=d;this.id=aI._oid++;this.node=d;d.raphael=this;this.paper=b;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);this.prev=b.top;b.top&&(b.top.next=this);b.top=this;this.next=null};var bc=aU[bE];aU[bE].rotate=function(d,b,E){if(this.removed){return this}if(d==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][aW](aH)}return this._.rt.deg}var e=this.getBBox();d=bC(d)[I](a);if(d[s]-1){b=aj(d[1]);E=aj(d[2])}d=aj(d[0]);if(b!=null&&b!==false){this._.rt.deg=d}else{this._.rt.deg+=d}(E==null)&&(b=null);this._.rt.cx=b;this._.rt.cy=E;b=b==null?e.x+e.width/2:b;E=E==null?e.y+e.height/2:E;if(this._.rt.deg){this.transformations[0]=aI.format("rotate({0} {1} {2})",this._.rt.deg,b,E);this.clip&&bh(this.clip,{transform:aI.format("rotate({0} {1} {2})",-this._.rt.deg,b,E)})}else{this.transformations[0]=aP;this.clip&&bh(this.clip,{transform:aP})}bh(this.node,{transform:this.transformations[aW](aH)});return this};aU[bE].hide=function(){!this.removed&&(this.node.style.display="none");return this};aU[bE].show=function(){!this.removed&&(this.node.style.display="");return this};aU[bE].remove=function(){if(this.removed){return}aE(this,this.paper);this.node.parentNode.removeChild(this.node);for(var b in this){delete this[b]}this.removed=true};aU[bE].getBBox=function(){if(this.removed){return this}if(this.type=="path"){return ai(this.attrs.path)}if(this.node.style.display=="none"){this.show();var d=true}var bH={};try{bH=this.node.getBBox()}catch(R){}finally{bH=bH||{}}if(this.type=="text"){bH={x:bH.x,y:Infinity,width:0,height:0};for(var b=0,E=this.node.getNumberOfChars();b<E;b++){var S=this.node.getExtentOfChar(b);(S.y<bH.y)&&(bH.y=S.y);(S.y+S.height-bH.y>bH.height)&&(bH.height=S.y+S.height-bH.y);(S.x+S.width-bH.x>bH.width)&&(bH.width=S.x+S.width-bH.x)}}d&&this.hide();return bH};aU[bE].attr=function(b,bJ){if(this.removed){return this}if(b==null){var bI={};for(var R in this.attrs){if(this.attrs[ag](R)){bI[R]=this.attrs[R]}}this._.rt.deg&&(bI.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(bI.scale=this.scale());bI.gradient&&bI.fill=="none"&&(bI.fill=bI.gradient)&&delete bI.gradient;return bI}if(bJ==null&&aI.is(b,af)){if(b=="translation"){return A.call(this)}if(b=="rotation"){return this.rotate()}if(b=="scale"){return this.scale()}if(b==a4&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}return this.attrs[b]}if(bJ==null&&aI.is(b,a7)){var bL={};for(var E=0,S=b.length;E<S;E++){bL[b[E]]=this.attr(b[E])}return bL}if(bJ!=null){var d={};d[b]=bJ}else{if(b!=null&&aI.is(b,"object")){d=b}}for(var bK in this.paper.customAttributes){if(this.paper.customAttributes[ag](bK)&&d[ag](bK)&&aI.is(this.paper.customAttributes[bK],"function")){var bH=this.paper.customAttributes[bK].apply(this,[][bw](d[bK]));this.attrs[bK]=d[bK];for(var e in bH){if(bH[ag](e)){d[e]=bH[e]}}}}an(this,d);return this};aU[bE].toFront=function(){if(this.removed){return this}this.node.parentNode[bk](this.node);var b=this.paper;b.top!=this&&al(this,b);return this};aU[bE].toBack=function(){if(this.removed){return this}if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);p(this,this.paper);var b=this.paper}return this};aU[bE].insertAfter=function(b){if(this.removed){return this}var d=b.node||b[b.length-1].node;if(d.nextSibling){d.parentNode.insertBefore(this.node,d.nextSibling)}else{d.parentNode[bk](this.node)}J(this,b,this.paper);return this};aU[bE].insertBefore=function(b){if(this.removed){return this}var d=b.node||b[0].node;d.parentNode.insertBefore(this.node,d);aL(this,b,this.paper);return this};aU[bE].blur=function(d){var b=this;if(+d!==0){var e=bh("filter"),E=bh("feGaussianBlur");b.attrs.blur=d;e.id=j();bh(E,{stdDeviation:+d||1.5});e.appendChild(E);b.paper.defs.appendChild(e);b._blur=e;bh(b.node,{filter:"url(#"+e.id+")"})}else{if(b._blur){b._blur.parentNode.removeChild(b._blur);delete b._blur;delete b.attrs.blur}b.node.removeAttribute("filter")}};var ae=function(d,b,S,R){var E=bh("circle");d.canvas&&d.canvas[bk](E);var e=new aU(E,d);e.attrs={cx:b,cy:S,r:R,fill:"none",stroke:"#000"};e.type="circle";bh(E,e.attrs);return e},bb=function(e,b,bI,d,S,bH){var R=bh("rect");e.canvas&&e.canvas[bk](R);var E=new aU(R,e);E.attrs={x:b,y:bI,width:d,height:S,r:bH||0,rx:bH||0,ry:bH||0,fill:"none",stroke:"#000"};E.type="rect";bh(R,E.attrs);return E},az=function(d,b,bH,S,R){var E=bh("ellipse");d.canvas&&d.canvas[bk](E);var e=new aU(E,d);e.attrs={cx:b,cy:bH,rx:S,ry:R,fill:"none",stroke:"#000"};e.type="ellipse";bh(E,e.attrs);return e},v=function(e,bH,b,bI,d,S){var R=bh("image");bh(R,{x:b,y:bI,width:d,height:S,preserveAspectRatio:"none"});R.setAttributeNS(e.xlink,"href",bH);e.canvas&&e.canvas[bk](R);var E=new aU(R,e);E.attrs={x:b,y:bI,width:d,height:S,src:bH};E.type="image";return E},ak=function(d,b,S,R){var E=bh("text");bh(E,{x:b,y:S,"text-anchor":"middle"});d.canvas&&d.canvas[bk](E);var e=new aU(E,d);e.attrs={x:b,y:S,"text-anchor":"middle",text:R,font:q.font,stroke:"none",fill:"#000"};e.type="text";an(e,e.attrs);return e},bA=function(d,b){this.width=d||this.width;this.height=b||this.height;this.canvas[D]("width",this.width);this.canvas[D]("height",this.height);return this},F=function(){var E=aJ[bB](0,arguments),e=E&&E.container,d=E.x,bH=E.y,R=E.width,b=E.height;if(!e){throw new Error("SVG container not found.")}var S=bh("svg");d=d||0;bH=bH||0;R=R||512;b=b||342;bh(S,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:R,height:b});if(e==1){S.style.cssText="position:absolute;left:"+d+"px;top:"+bH+"px";aa.body[bk](S)}else{if(e.firstChild){e.insertBefore(S,e.firstChild)}else{e[bk](S)}}e=new bz;e.width=R;e.height=b;e.canvas=S;be.call(e,e,aI.fn);e.clear();return e};aZ.clear=function(){var b=this.canvas;while(b.firstChild){b.removeChild(b.firstChild)}this.bottom=this.top=null;(this.desc=bh("desc"))[bk](aa.createTextNode("Created with Rapha\xebl"));b[bk](this.desc);b[bk](this.defs=bh("defs"))};aZ.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this){this[b]=z(b)}}}if(aI.vml){var N={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},aN=/([clmz]),?([^clmz]*)/gi,bx=/ progid:\S+Blur\([^\)]+\)/g,bF=/-?[^,\s-]+/g,aX=1000+aH+1000,u=10,t={path:1,rect:1},bg=function(bL){var bI=/[ahqstv]/ig,e=y;bC(bL).match(bI)&&(e=V);bI=/[clmz]/g;if(e==y&&!bC(bL).match(bI)){var bH=bC(bL)[bs](aN,function(bP,bR,bN){var bQ=[],bM=bG.call(bR)=="m",bO=N[bR];bN[bs](bF,function(bS){if(bM&&bQ[s]==2){bO+=bQ+N[bR=="m"?"l":"L"];bQ=[]}bQ[k](ad(bS*u))});return bO+bQ});return bH}var bJ=e(bL),d,b;bH=[];for(var R=0,bK=bJ[s];R<bK;R++){d=bJ[R];b=bG.call(bJ[R][0]);b=="z"&&(b="x");for(var E=1,S=d[s];E<S;E++){b+=ad(d[E]*u)+(E!=S-1?",":aP)}bH[k](b)}return bH[aW](aH)};aI[a0]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};x=function(e,d){var S=ay("group");S.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";S.coordsize=d.coordsize;S.coordorigin=d.coordorigin;var R=ay("shape"),E=R.style;E.width=d.width+"px";E.height=d.height+"px";R.coordsize=aX;R.coordorigin=d.coordorigin;S[bk](R);var bH=new aU(R,S,d),b={fill:"none",stroke:"#000"};e&&(b.path=e);bH.type="path";bH.path=[];bH.Path=aP;an(bH,b);d.canvas[bk](S);return bH};an=function(bK,bR){bK.attrs=bK.attrs||{};var bO=bK.node,bS=bK.attrs,bH=bO.style,E,bQ=(bR.x!=bS.x||bR.y!=bS.y||bR.width!=bS.width||bR.height!=bS.height||bR.r!=bS.r)&&bK.type=="rect",bW=bK;for(var bI in bR){if(bR[ag](bI)){bS[bI]=bR[bI]}}if(bQ){bS.path=at(bS.x,bS.y,bS.width,bS.height,bS.r);bK.X=bS.x;bK.Y=bS.y;bK.W=bS.width;bK.H=bS.height}bR.href&&(bO.href=bR.href);bR.title&&(bO.title=bR.title);bR.target&&(bO.target=bR.target);bR.cursor&&(bH.cursor=bR.cursor);"blur" in bR&&bK.blur(bR.blur);if(bR.path&&bK.type=="path"||bQ){bO.path=bg(bS.path)}if(bR.rotation!=null){bK.rotate(bR.rotation,true)}if(bR.translation){E=bC(bR.translation)[I](a);A.call(bK,E[0],E[1]);if(bK._.rt.cx!=null){bK._.rt.cx+=+E[0];bK._.rt.cy+=+E[1];bK.setBox(bK.attrs,E[0],E[1])}}if(bR.scale){E=bC(bR.scale)[I](a);bK.scale(+E[0]||1,+E[1]||+E[0]||1,+E[2]||null,+E[3]||null)}if("clip-rect" in bR){var b=bC(bR["clip-rect"])[I](a);if(b[s]==4){b[2]=+b[2]+(+b[0]);b[3]=+b[3]+(+b[1]);var bJ=bO.clipRect||aa.createElement("div"),bV=bJ.style,S=bO.parentNode;bV.clip=aI.format("rect({1}px {2}px {3}px {0}px)",b);if(!bO.clipRect){bV.position="absolute";bV.top=0;bV.left=0;bV.width=bK.paper.width+"px";bV.height=bK.paper.height+"px";S.parentNode.insertBefore(bJ,S);bJ[bk](S);bO.clipRect=bJ}}if(!bR["clip-rect"]){bO.clipRect&&(bO.clipRect.style.clip=aP)}}if(bK.type=="image"&&bR.src){bO.src=bR.src}if(bK.type=="image"&&bR.opacity){bO.filterOpacity=a5+".Alpha(opacity="+(bR.opacity*100)+")";bH.filter=(bO.filterMatrix||aP)+(bO.filterOpacity||aP)}bR.font&&(bH.font=bR.font);bR["font-family"]&&(bH.fontFamily='"'+bR["font-family"][I](",")[0][bs](/^['"]+|['"]+$/g,aP)+'"');bR["font-size"]&&(bH.fontSize=bR["font-size"]);bR["font-weight"]&&(bH.fontWeight=bR["font-weight"]);bR["font-style"]&&(bH.fontStyle=bR["font-style"]);if(bR.opacity!=null||bR["stroke-width"]!=null||bR.fill!=null||bR.stroke!=null||bR["stroke-width"]!=null||bR["stroke-opacity"]!=null||bR["fill-opacity"]!=null||bR["stroke-dasharray"]!=null||bR["stroke-miterlimit"]!=null||bR["stroke-linejoin"]!=null||bR["stroke-linecap"]!=null){bO=bK.shape||bO;var bP=(bO.getElementsByTagName(a4)&&bO.getElementsByTagName(a4)[0]),bT=false;!bP&&(bT=bP=ay(a4));if("fill-opacity" in bR||"opacity" in bR){var d=((+bS["fill-opacity"]+1||2)-1)*((+bS.opacity+1||2)-1)*((+aI.getRGB(bR.fill).o+1||2)-1);d=bi(m(d,0),1);bP.opacity=d}bR.fill&&(bP.on=true);if(bP.on==null||bR.fill=="none"){bP.on=false}if(bP.on&&bR.fill){var e=bR.fill.match(h);if(e){bP.src=e[1];bP.type="tile"}else{bP.color=aI.getRGB(bR.fill).hex;bP.src=aP;bP.type="solid";if(aI.getRGB(bR.fill).error&&(bW.type in {circle:1,ellipse:1}||bC(bR.fill).charAt()!="r")&&g(bW,bR.fill)){bS.fill="none";bS.gradient=bR.fill}}}bT&&bO[bk](bP);var R=(bO.getElementsByTagName("stroke")&&bO.getElementsByTagName("stroke")[0]),bU=false;!R&&(bU=R=ay("stroke"));if((bR.stroke&&bR.stroke!="none")||bR["stroke-width"]||bR["stroke-opacity"]!=null||bR["stroke-dasharray"]||bR["stroke-miterlimit"]||bR["stroke-linejoin"]||bR["stroke-linecap"]){R.on=true}(bR.stroke=="none"||R.on==null||bR.stroke==0||bR["stroke-width"]==0)&&(R.on=false);var bN=aI.getRGB(bR.stroke);R.on&&bR.stroke&&(R.color=bN.hex);d=((+bS["stroke-opacity"]+1||2)-1)*((+bS.opacity+1||2)-1)*((+bN.o+1||2)-1);var bL=(aj(bR["stroke-width"])||1)*0.75;d=bi(m(d,0),1);bR["stroke-width"]==null&&(bL=bS["stroke-width"]);bR["stroke-width"]&&(R.weight=bL);bL&&bL<1&&(d*=bL)&&(R.weight=1);R.opacity=d;bR["stroke-linejoin"]&&(R.joinstyle=bR["stroke-linejoin"]||"miter");R.miterlimit=bR["stroke-miterlimit"]||8;bR["stroke-linecap"]&&(R.endcap=bR["stroke-linecap"]=="butt"?"flat":bR["stroke-linecap"]=="square"?"square":"round");if(bR["stroke-dasharray"]){var bM={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};R.dashstyle=bM[ag](bR["stroke-dasharray"])?bM[bR["stroke-dasharray"]]:aP}bU&&bO[bk](R)}if(bW.type=="text"){bH=bW.paper.span.style;bS.font&&(bH.font=bS.font);bS["font-family"]&&(bH.fontFamily=bS["font-family"]);bS["font-size"]&&(bH.fontSize=bS["font-size"]);bS["font-weight"]&&(bH.fontWeight=bS["font-weight"]);bS["font-style"]&&(bH.fontStyle=bS["font-style"]);bW.node.string&&(bW.paper.span.innerHTML=bC(bW.node.string)[bs](/</g,"&#60;")[bs](/&/g,"&#38;")[bs](/\n/g,"<br>"));bW.W=bS.w=bW.paper.span.offsetWidth;bW.H=bS.h=bW.paper.span.offsetHeight;bW.X=bS.x;bW.Y=bS.y+ad(bW.H/2);switch(bS["text-anchor"]){case"start":bW.node.style["v-text-align"]="left";bW.bbx=ad(bW.W/2);break;case"end":bW.node.style["v-text-align"]="right";bW.bbx=-ad(bW.W/2);break;default:bW.node.style["v-text-align"]="center";break}}};g=function(b,bH){b.attrs=b.attrs||{};var bI=b.attrs,bK,R="linear",S=".5 .5";b.attrs.gradient=bH;bH=bC(bH)[bs](aO,function(bN,bO,bM){R="radial";if(bO&&bM){bO=aj(bO);bM=aj(bM);bl(bO-0.5,2)+bl(bM-0.5,2)>0.25&&(bM=ao.sqrt(0.25-bl(bO-0.5,2))*((bM>0.5)*2-1)+0.5);S=bO+aH+bM}return aP});bH=bH[I](/\s*\-\s*/);if(R=="linear"){var d=bH.shift();d=-aj(d);if(isNaN(d)){return null}}var E=w(bH);if(!E){return null}b=b.shape||b.node;bK=b.getElementsByTagName(a4)[0]||ay(a4);!bK.parentNode&&b.appendChild(bK);if(E[s]){bK.on=true;bK.method="none";bK.color=E[0].color;bK.color2=E[E[s]-1].color;var bL=[];for(var e=0,bJ=E[s];e<bJ;e++){E[e].offset&&bL[k](E[e].offset+aH+E[e].color)}bK.colors&&(bK.colors.value=bL[s]?bL[aW]():"0% "+bK.color);if(R=="radial"){bK.type="gradientradial";bK.focus="100%";bK.focussize=S;bK.focusposition=S}else{bK.type="gradient";bK.angle=(270-d)%360}}return 1};aU=function(R,bH,b){var S=0,e=0,d=0,E=1;this[0]=R;this.id=aI._oid++;this.node=R;R.raphael=this;this.X=0;this.Y=0;this.attrs={};this.Group=bH;this.paper=b;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);this.prev=b.top;b.top&&(b.top.next=this);b.top=this;this.next=null};bc=aU[bE];bc.rotate=function(d,b,e){if(this.removed){return this}if(d==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][aW](aH)}return this._.rt.deg}d=bC(d)[I](a);if(d[s]-1){b=aj(d[1]);e=aj(d[2])}d=aj(d[0]);if(b!=null){this._.rt.deg=d}else{this._.rt.deg+=d}e==null&&(b=null);this._.rt.cx=b;this._.rt.cy=e;this.setBox(this.attrs,b,e);this.Group.style.rotation=this._.rt.deg;return this};bc.setBox=function(E,R,e){if(this.removed){return this}var b=this.Group.style,S=(this.shape&&this.shape.style)||this.node.style;E=E||{};for(var bH in E){if(E[ag](bH)){this.attrs[bH]=E[bH]}}R=R||this._.rt.cx;e=e||this._.rt.cy;var bK=this.attrs,bN,bM,bO,bJ;switch(this.type){case"circle":bN=bK.cx-bK.r;bM=bK.cy-bK.r;bO=bJ=bK.r*2;break;case"ellipse":bN=bK.cx-bK.rx;bM=bK.cy-bK.ry;bO=bK.rx*2;bJ=bK.ry*2;break;case"image":bN=+bK.x;bM=+bK.y;bO=bK.width||0;bJ=bK.height||0;break;case"text":this.textpath.v=["m",ad(bK.x),", ",ad(bK.y-2),"l",ad(bK.x)+1,", ",ad(bK.y-2)][aW](aP);bN=bK.x-ad(this.W/2);bM=bK.y-this.H/2;bO=this.W;bJ=this.H;break;case"rect":case"path":if(!this.attrs.path){bN=0;bM=0;bO=this.paper.width;bJ=this.paper.height}else{var bI=ai(this.attrs.path);bN=bI.x;bM=bI.y;bO=bI.width;bJ=bI.height}break;default:bN=0;bM=0;bO=this.paper.width;bJ=this.paper.height;break}R=(R==null)?bN+bO/2:R;e=(e==null)?bM+bJ/2:e;var d=R-this.paper.width/2,bL=e-this.paper.height/2,bP;b.left!=(bP=d+"px")&&(b.left=bP);b.top!=(bP=bL+"px")&&(b.top=bP);this.X=t[ag](this.type)?-d:bN;this.Y=t[ag](this.type)?-bL:bM;this.W=bO;this.H=bJ;if(t[ag](this.type)){S.left!=(bP=-d*u+"px")&&(S.left=bP);S.top!=(bP=-bL*u+"px")&&(S.top=bP)}else{if(this.type=="text"){S.left!=(bP=-d+"px")&&(S.left=bP);S.top!=(bP=-bL+"px")&&(S.top=bP)}else{b.width!=(bP=this.paper.width+"px")&&(b.width=bP);b.height!=(bP=this.paper.height+"px")&&(b.height=bP);S.left!=(bP=bN-d+"px")&&(S.left=bP);S.top!=(bP=bM-bL+"px")&&(S.top=bP);S.width!=(bP=bO+"px")&&(S.width=bP);S.height!=(bP=bJ+"px")&&(S.height=bP)}}};bc.hide=function(){!this.removed&&(this.Group.style.display="none");return this};bc.show=function(){!this.removed&&(this.Group.style.display="block");return this};bc.getBBox=function(){if(this.removed){return this}if(t[ag](this.type)){return ai(this.attrs.path)}return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};bc.remove=function(){if(this.removed){return}aE(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this){delete this[b]}this.removed=true};bc.attr=function(b,bH){if(this.removed){return this}if(b==null){var S={};for(var E in this.attrs){if(this.attrs[ag](E)){S[E]=this.attrs[E]}}this._.rt.deg&&(S.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(S.scale=this.scale());S.gradient&&S.fill=="none"&&(S.fill=S.gradient)&&delete S.gradient;return S}if(bH==null&&aI.is(b,"string")){if(b=="translation"){return A.call(this)}if(b=="rotation"){return this.rotate()}if(b=="scale"){return this.scale()}if(b==a4&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}return this.attrs[b]}if(this.attrs&&bH==null&&aI.is(b,a7)){var bK,bJ={};for(E=0,bK=b[s];E<bK;E++){bJ[b[E]]=this.attr(b[E])}return bJ}var d;if(bH!=null){d={};d[b]=bH}bH==null&&aI.is(b,"object")&&(d=b);if(d){for(var bI in this.paper.customAttributes){if(this.paper.customAttributes[ag](bI)&&d[ag](bI)&&aI.is(this.paper.customAttributes[bI],"function")){var R=this.paper.customAttributes[bI].apply(this,[][bw](d[bI]));this.attrs[bI]=d[bI];for(var e in R){if(R[ag](e)){d[e]=R[e]}}}}if(d.text&&this.type=="text"){this.node.string=d.text}an(this,d);if(d.gradient&&(({circle:1,ellipse:1})[ag](this.type)||bC(d.gradient).charAt()!="r")){g(this,d.gradient)}(!t[ag](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};bc.toFront=function(){!this.removed&&this.Group.parentNode[bk](this.Group);this.paper.top!=this&&al(this,this.paper);return this};bc.toBack=function(){if(this.removed){return this}if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);p(this,this.paper)}return this};bc.insertAfter=function(b){if(this.removed){return this}if(b.constructor==ah){b=b[b.length-1]}if(b.Group.nextSibling){b.Group.parentNode.insertBefore(this.Group,b.Group.nextSibling)}else{b.Group.parentNode[bk](this.Group)}J(this,b,this.paper);return this};bc.insertBefore=function(b){if(this.removed){return this}if(b.constructor==ah){b=b[0]}b.Group.parentNode.insertBefore(this.Group,b.Group);aL(this,b,this.paper);return this};bc.blur=function(b){var d=this.node.runtimeStyle,e=d.filter;e=e.replace(bx,aP);if(+b!==0){this.attrs.blur=b;d.filter=e+aH+a5+".Blur(pixelradius="+(+b||1.5)+")";d.margin=aI.format("-{0}px 0 0 -{0}px",ad(+b||1.5))}else{d.filter=e;d.margin=0;delete this.attrs.blur}};ae=function(d,b,bI,S){var R=ay("group"),bH=ay("oval"),e=bH.style;R.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";R.coordsize=aX;R.coordorigin=d.coordorigin;R[bk](bH);var E=new aU(bH,R,d);E.type="circle";an(E,{stroke:"#000",fill:"none"});E.attrs.cx=b;E.attrs.cy=bI;E.attrs.r=S;E.setBox({x:b-S,y:bI-S,width:S*2,height:S*2});d.canvas[bk](R);return E};function at(b,R,d,e,E){if(E){return aI.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",b+E,R,d-E*2,E,-E,e-E*2,E*2-d,E*2-e)}else{return aI.format("M{0},{1}l{2},0,0,{3},{4},0z",b,R,d,e,-d)}}bb=function(d,bH,R,bI,e,b){var bJ=at(bH,R,bI,e,b),E=d.path(bJ),S=E.attrs;E.X=S.x=bH;E.Y=S.y=R;E.W=S.width=bI;E.H=S.height=e;S.r=b;S.path=bJ;E.type="rect";return E};az=function(b,bJ,bI,e,d){var R=ay("group"),E=ay("oval"),bH=E.style;R.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";R.coordsize=aX;R.coordorigin=b.coordorigin;R[bk](E);var S=new aU(E,R,b);S.type="ellipse";an(S,{stroke:"#000"});S.attrs.cx=bJ;S.attrs.cy=bI;S.attrs.rx=e;S.attrs.ry=d;S.setBox({x:bJ-e,y:bI-d,width:e*2,height:d*2});b.canvas[bk](R);return S};v=function(d,b,bI,bH,bJ,E){var R=ay("group"),e=ay("image");R.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";R.coordsize=aX;R.coordorigin=d.coordorigin;e.src=b;R[bk](e);var S=new aU(e,R,d);S.type="image";S.attrs.src=b;S.attrs.x=bI;S.attrs.y=bH;S.attrs.w=bJ;S.attrs.h=E;S.setBox({x:bI,y:bH,width:bJ,height:E});d.canvas[bk](R);return S};ak=function(d,bJ,bI,bK){var R=ay("group"),E=ay("shape"),bH=E.style,bL=ay("path"),b=bL.style,e=ay("textpath");R.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";R.coordsize=aX;R.coordorigin=d.coordorigin;bL.v=aI.format("m{0},{1}l{2},{1}",ad(bJ*10),ad(bI*10),ad(bJ*10)+1);bL.textpathok=true;bH.width=d.width;bH.height=d.height;e.string=bC(bK);e.on=true;E[bk](e);E[bk](bL);R[bk](E);var S=new aU(e,R,d);S.shape=E;S.textpath=bL;S.type="text";S.attrs.text=bK;S.attrs.x=bJ;S.attrs.y=bI;S.attrs.w=1;S.attrs.h=1;an(S,{font:q.font,stroke:"none",fill:"#000"});S.setBox();d.canvas[bk](R);return S};bA=function(e,b){var d=this.canvas.style;e==+e&&(e+="px");b==+b&&(b+="px");d.width=e;d.height=b;d.clip="rect(0 "+e+" "+b+" 0)";return this};var ay;aa.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!aa.namespaces.rvml&&aa.namespaces.add("rvml","urn:schemas-microsoft-com:vml");ay=function(b){return aa.createElement("<rvml:"+b+' class="rvml">')}}catch(aw){ay=function(b){return aa.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}F=function(){var e=aJ[bB](0,arguments),b=e.container,bJ=e.height,bK,d=e.width,bI=e.x,bH=e.y;if(!b){throw new Error("VML container not found.")}var R=new bz,S=R.canvas=aa.createElement("div"),E=S.style;bI=bI||0;bH=bH||0;d=d||512;bJ=bJ||342;d==+d&&(d+="px");bJ==+bJ&&(bJ+="px");R.width=1000;R.height=1000;R.coordsize=u*1000+aH+u*1000;R.coordorigin="0 0";R.span=aa.createElement("span");R.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";S[bk](R.span);E.cssText=aI.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",d,bJ);if(b==1){aa.body[bk](S);E.left=bI+"px";E.top=bH+"px";E.position="absolute"}else{if(b.firstChild){b.insertBefore(S,b.firstChild)}else{b[bk](S)}}be.call(R,R,aI.fn);return R};aZ.clear=function(){this.canvas.innerHTML=aP;this.span=aa.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas[bk](this.span);this.bottom=this.top=null};aZ.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var b in this){this[b]=z(b)}return true}}var U=navigator.userAgent.match(/Version\/(.*?)\s/);if((navigator.vendor=="Apple Computer, Inc.")&&(U&&U[1]<4||navigator.platform.slice(0,2)=="iP")){aZ.safari=function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});aQ.setTimeout(function(){b.remove()})}}else{aZ.safari=function(){}}var O=function(){this.returnValue=false},bv=function(){return this.originalEvent.preventDefault()},a3=function(){this.cancelBubble=true},aD=function(){return this.originalEvent.stopPropagation()},av=(function(){if(aa.addEventListener){return function(S,E,e,d){var b=W&&bq[E]?bq[E]:E;var R=function(bK){if(W&&bq[ag](E)){for(var bI=0,bJ=bK.targetTouches&&bK.targetTouches.length;bI<bJ;bI++){if(bK.targetTouches[bI].target==S){var bH=bK;bK=bK.targetTouches[bI];bK.originalEvent=bH;bK.preventDefault=bv;bK.stopPropagation=aD;break}}}return e.call(d,bK)};S.addEventListener(b,R,false);return function(){S.removeEventListener(b,R,false);return true}}}else{if(aa.attachEvent){return function(S,E,e,d){var R=function(bH){bH=bH||aQ.event;bH.preventDefault=bH.preventDefault||O;bH.stopPropagation=bH.stopPropagation||a3;return e.call(d,bH)};S.attachEvent("on"+E,R);var b=function(){S.detachEvent("on"+E,R);return true};return b}}}})(),a8=[],br=function(S){var bI=S.clientX,bH=S.clientY,bJ=aa.documentElement.scrollTop||aa.body.scrollTop,bK=aa.documentElement.scrollLeft||aa.body.scrollLeft,b,d=a8.length;while(d--){b=a8[d];if(W){var R=S.touches.length,E;while(R--){E=S.touches[R];if(E.identifier==b.el._drag.id){bI=E.clientX;bH=E.clientY;(S.originalEvent?S.originalEvent:S).preventDefault();break}}}else{S.preventDefault()}bI+=bK;bH+=bJ;b.move&&b.move.call(b.move_scope||b.el,bI-b.el._drag.x,bH-b.el._drag.y,bI,bH,S)}},f=function(E){aI.unmousemove(br).unmouseup(f);var d=a8.length,b;while(d--){b=a8[d];b.el._drag={};b.end&&b.end.call(b.end_scope||b.start_scope||b.move_scope||b.el,E)}a8=[]};for(var ar=Q[s];ar--;){(function(b){aI[b]=aU[bE][b]=function(e,d){if(aI.is(e,"function")){this.events=this.events||[];this.events.push({name:b,f:e,unbind:av(this.shape||this.node||aa,b,e,d||this)})}return this};aI["un"+b]=aU[bE]["un"+b]=function(E){var e=this.events,d=e[s];while(d--){if(e[d].name==b&&e[d].f==E){e[d].unbind();e.splice(d,1);!e.length&&delete this.events;return this}}return this}})(Q[ar])}bc.hover=function(E,b,e,d){return this.mouseover(E,e).mouseout(b,d||e)};bc.unhover=function(d,b){return this.unmouseover(d).unmouseout(b)};bc.drag=function(d,S,R,b,e,E){this._drag={};this.mousedown(function(bI){(bI.originalEvent||bI).preventDefault();var bH=aa.documentElement.scrollTop||aa.body.scrollTop,bJ=aa.documentElement.scrollLeft||aa.body.scrollLeft;this._drag.x=bI.clientX+bJ;this._drag.y=bI.clientY+bH;this._drag.id=bI.identifier;S&&S.call(e||b||this,bI.clientX+bJ,bI.clientY+bH,bI);!a8.length&&aI.mousemove(br).mouseup(f);a8.push({el:this,move:d,end:R,move_scope:b,start_scope:e,end_scope:E})});return this};bc.undrag=function(b,E,e){var d=a8.length;while(d--){a8[d].el==this&&(a8[d].move==b&&a8[d].end==e)&&a8.splice(d++,1)}!a8.length&&aI.unmousemove(br).unmouseup(f)};aZ.circle=function(b,e,d){return ae(this,b||0,e||0,d||0)};aZ.rect=function(b,R,d,e,E){return bb(this,b||0,R||0,d||0,e||0,E||0)};aZ.ellipse=function(b,E,e,d){return az(this,b||0,E||0,e||0,d||0)};aZ.path=function(b){b&&!aI.is(b,af)&&!aI.is(b[0],a7)&&(b+=aP);return x(aI.format[bB](aI,arguments),this)};aZ.image=function(E,b,R,d,e){return v(this,E||"about:blank",b||0,R||0,d||0,e||0)};aZ.text=function(b,e,d){return ak(this,b||0,e||0,bC(d))};aZ.set=function(b){arguments[s]>1&&(b=Array[bE].splice.call(arguments,0,arguments[s]));return new ah(b)};aZ.setSize=bA;aZ.top=aZ.bottom=null;aZ.raphael=aI;function C(){return this.x+aH+this.y}bc.resetScale=function(){if(this.removed){return this}this._.sx=1;this._.sy=1;this.attrs.scale="1 1"};bc.scale=function(bZ,bY,bQ,bO){if(this.removed){return this}if(bZ==null&&bY==null){return{x:this._.sx,y:this._.sy,toString:C}}bY=bY||bZ;!+bY&&(bY=bZ);var d,b,b7,b6,ca=this.attrs;if(bZ!=0){var cb=this.getBBox(),E=cb.x+cb.width/2,e=cb.y+cb.height/2,b4=aq(bZ/this._.sx),b3=aq(bY/this._.sy);bQ=(+bQ||bQ==0)?bQ:E;bO=(+bO||bO==0)?bO:e;var bJ=this._.sx>0,bI=this._.sy>0,bP=~~(bZ/aq(bZ)),bN=~~(bY/aq(bY)),S=b4*bP,R=b3*bN,b0=this.node.style,bX=bQ+aq(E-bQ)*S*(E>bQ==bJ?1:-1),bW=bO+aq(e-bO)*R*(e>bO==bI?1:-1),bT=(bZ*bP>bY*bN?b3:b4);switch(this.type){case"rect":case"image":var bL=ca.width*b4,bU=ca.height*b3;this.attr({height:bU,r:ca.r*bT,width:bL,x:bX-bL/2,y:bW-bU/2});break;case"circle":case"ellipse":this.attr({rx:ca.rx*b4,ry:ca.ry*b3,r:ca.r*bT,cx:bX,cy:bW});break;case"text":this.attr({x:bX,y:bW});break;case"path":var b2=au(ca.path),bK=true,bS=bJ?S:b4,bR=bI?R:b3;for(var b9=0,bV=b2[s];b9<bV;b9++){var b5=b2[b9],bM=bo.call(b5[0]);if(bM=="M"&&bK){continue}else{bK=false}if(bM=="A"){b5[b2[b9][s]-2]*=bS;b5[b2[b9][s]-1]*=bR;b5[1]*=b4;b5[2]*=b3;b5[5]=+(bP+bN?!!+b5[5]:!+b5[5])}else{if(bM=="H"){for(var b8=1,bH=b5[s];b8<bH;b8++){b5[b8]*=bS}}else{if(bM=="V"){for(b8=1,bH=b5[s];b8<bH;b8++){b5[b8]*=bR}}else{for(b8=1,bH=b5[s];b8<bH;b8++){b5[b8]*=(b8%2)?bS:bR}}}}}var b1=ai(b2);d=bX-b1.x-b1.width/2;b=bW-b1.y-b1.height/2;b2[0][1]+=d;b2[0][2]+=b;this.attr({path:b2});break}if(this.type in {text:1,image:1}&&(bP!=1||bN!=1)){if(this.transformations){this.transformations[2]="scale("[bw](bP,",",bN,")");this.node[D]("transform",this.transformations[aW](aH));d=(bP==-1)?-ca.x-(bL||0):ca.x;b=(bN==-1)?-ca.y-(bU||0):ca.y;this.attr({x:d,y:b});ca.fx=bP-1;ca.fy=bN-1}else{this.node.filterMatrix=a5+".Matrix(M11="[bw](bP,", M12=0, M21=0, M22=",bN,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");b0.filter=(this.node.filterMatrix||aP)+(this.node.filterOpacity||aP)}}else{if(this.transformations){this.transformations[2]=aP;this.node[D]("transform",this.transformations[aW](aH));ca.fx=0;ca.fy=0}else{this.node.filterMatrix=aP;b0.filter=(this.node.filterMatrix||aP)+(this.node.filterOpacity||aP)}}ca.scale=[bZ,bY,bQ,bO][aW](aH);this._.sx=bZ;this._.sy=bY}return this};bc.clone=function(){if(this.removed){return null}var b=this.attr();delete b.scale;delete b.translation;return this.paper[this.type]().attr(b)};var a2={},l=function(R,d,bJ,bI,bR,bQ,bP,bN,S){var bM=0,bL=100,E=[R,d,bJ,bI,bR,bQ,bP,bN].join(),b=a2[E],bH,e;!b&&(a2[E]=b={data:[]});b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){delete a2[E]},2000);if(S!=null){var bO=l(R,d,bJ,bI,bR,bQ,bP,bN);bL=~~bO*10}for(var bK=0;bK<bL+1;bK++){if(b.data[S]>bK){e=b.data[bK*bL]}else{e=aI.findDotsAtSegment(R,d,bJ,bI,bR,bQ,bP,bN,bK/bL);b.data[bK]=e}bK&&(bM+=bl(bl(bH.x-e.x,2)+bl(bH.y-e.y,2),0.5));if(S!=null&&bM>=S){return e}bH=e}if(S==null){return bM}},a1=function(b,d){return function(bP,R,S){bP=V(bP);var bL,bK,e,bH,E="",bO={},bM,bJ=0;for(var bI=0,bN=bP.length;bI<bN;bI++){e=bP[bI];if(e[0]=="M"){bL=+e[1];bK=+e[2]}else{bH=l(bL,bK,e[1],e[2],e[3],e[4],e[5],e[6]);if(bJ+bH>R){if(d&&!bO.start){bM=l(bL,bK,e[1],e[2],e[3],e[4],e[5],e[6],R-bJ);E+=["C",bM.start.x,bM.start.y,bM.m.x,bM.m.y,bM.x,bM.y];if(S){return E}bO.start=E;E=["M",bM.x,bM.y+"C",bM.n.x,bM.n.y,bM.end.x,bM.end.y,e[5],e[6]][aW]();bJ+=bH;bL=+e[5];bK=+e[6];continue}if(!b&&!d){bM=l(bL,bK,e[1],e[2],e[3],e[4],e[5],e[6],R-bJ);return{x:bM.x,y:bM.y,alpha:bM.alpha}}}bJ+=bH;bL=+e[5];bK=+e[6]}E+=e}bO.end=E;bM=b?bJ:d?bO:aI.findDotsAtSegment(bL,bK,e[1],e[2],e[3],e[4],e[5],e[6],1);bM.alpha&&(bM={x:bM.x,y:bM.y,alpha:bM.alpha});return bM}};var aK=a1(1),L=a1(),Y=a1(0,1);bc.getTotalLength=function(){if(this.type!="path"){return}if(this.node.getTotalLength){return this.node.getTotalLength()}return aK(this.attrs.path)};bc.getPointAtLength=function(b){if(this.type!="path"){return}return L(this.attrs.path,b)};bc.getSubpath=function(e,d){if(this.type!="path"){return}if(aq(this.getTotalLength()-d)<"1e-6"){return Y(this.attrs.path,e).end}var b=Y(this.attrs.path,d,1);return e?Y(b,e).end:b};aI.easing_formulas={linear:function(b){return b},"<":function(b){return bl(b,3)},">":function(b){return bl(b-1,3)+1},"<>":function(b){b=b*2;if(b<1){return bl(b,3)/2}b-=2;return(bl(b,3)+2)/2},backIn:function(d){var b=1.70158;return d*d*((b+1)*d-b)},backOut:function(d){d=d-1;var b=1.70158;return d*d*((b+1)*d+b)+1},elastic:function(e){if(e==0||e==1){return e}var d=0.3,b=d/4;return bl(2,-10*e)*ao.sin((e-b)*(2*aM)/d)+1},bounce:function(E){var d=7.5625,e=2.75,b;if(E<(1/e)){b=d*E*E}else{if(E<(2/e)){E-=(1.5/e);b=d*E*E+0.75}else{if(E<(2.5/e)){E-=(2.25/e);b=d*E*E+0.9375}else{E-=(2.625/e);b=d*E*E+0.984375}}}return b}};var X=[],bu=function(){var bI=+new Date;for(var bT=0;bT<X[s];bT++){var bY=X[bT];if(bY.stop||bY.el.removed){continue}var R=bI-bY.start,bQ=bY.ms,bP=bY.easing,bU=bY.from,bN=bY.diff,d=bY.to,bM=bY.t,bH=bY.el,bO={},b;if(R<bQ){var E=bP(R/bQ);for(var bR in bU){if(bU[ag](bR)){switch(am[bR]){case"along":b=E*bQ*bN[bR];d.back&&(b=d.len-b);var bS=L(d[bR],b);bH.translate(bN.sx-bN.x||0,bN.sy-bN.y||0);bN.x=bS.x;bN.y=bS.y;bH.translate(bS.x-bN.sx,bS.y-bN.sy);d.rot&&bH.rotate(bN.r+bS.alpha,bS.x,bS.y);break;case aF:b=+bU[bR]+E*bQ*bN[bR];break;case"colour":b="rgb("+[K(ad(bU[bR].r+E*bQ*bN[bR].r)),K(ad(bU[bR].g+E*bQ*bN[bR].g)),K(ad(bU[bR].b+E*bQ*bN[bR].b))][aW](",")+")";break;case"path":b=[];for(var bW=0,bL=bU[bR][s];bW<bL;bW++){b[bW]=[bU[bR][bW][0]];for(var bV=1,bX=bU[bR][bW][s];bV<bX;bV++){b[bW][bV]=+bU[bR][bW][bV]+E*bQ*bN[bR][bW][bV]}b[bW]=b[bW][aW](aH)}b=b[aW](aH);break;case"csv":switch(bR){case"translation":var bK=E*bQ*bN[bR][0]-bM.x,bJ=E*bQ*bN[bR][1]-bM.y;bM.x+=bK;bM.y+=bJ;b=bK+aH+bJ;break;case"rotation":b=+bU[bR][0]+E*bQ*bN[bR][0];bU[bR][1]&&(b+=","+bU[bR][1]+","+bU[bR][2]);break;case"scale":b=[+bU[bR][0]+E*bQ*bN[bR][0],+bU[bR][1]+E*bQ*bN[bR][1],(2 in d[bR]?d[bR][2]:aP),(3 in d[bR]?d[bR][3]:aP)][aW](aH);break;case"clip-rect":b=[];bW=4;while(bW--){b[bW]=+bU[bR][bW]+E*bQ*bN[bR][bW]}break}break;default:var S=[].concat(bU[bR]);b=[];bW=bH.paper.customAttributes[bR].length;while(bW--){b[bW]=+S[bW]+E*bQ*bN[bR][bW]}break}bO[bR]=b}}bH.attr(bO);bH._run&&bH._run.call(bH)}else{if(d.along){bS=L(d.along,d.len*!d.back);bH.translate(bN.sx-(bN.x||0)+bS.x-bN.sx,bN.sy-(bN.y||0)+bS.y-bN.sy);d.rot&&bH.rotate(bN.r+bS.alpha,bS.x,bS.y)}(bM.x||bM.y)&&bH.translate(-bM.x,-bM.y);d.scale&&(d.scale+=aP);bH.attr(d);X.splice(bT--,1)}}aI.svg&&bH&&bH.paper&&bH.paper.safari();X[s]&&setTimeout(bu)},by=function(b,e,S,R,E){var d=S-R;e.timeouts.push(setTimeout(function(){aI.is(E,"function")&&E.call(e);e.animate(b,d,b.easing)},R))},K=function(b){return m(bi(b,255),0)},A=function(b,e){if(b==null){return{x:this._.tx,y:this._.ty,toString:C}}this._.tx+=+b;this._.ty+=+e;switch(this.type){case"circle":case"ellipse":this.attr({cx:+b+this.attrs.cx,cy:+e+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+b+this.attrs.x,y:+e+this.attrs.y});break;case"path":var d=au(this.attrs.path);d[0][1]+=+b;d[0][2]+=+e;this.attr({path:d});break}return this};bc.animateWith=function(e,R,b,bH,S){for(var d=0,E=X.length;d<E;d++){if(X[d].el.id==e.id){R.start=X[d].start}}return this.animate(R,b,bH,S)};bc.animateAlong=aV();bc.animateAlongBack=aV(1);function aV(b){return function(E,e,d,S){var R={back:b};aI.is(d,"function")?(S=d):(R.rot=d);E&&E.constructor==aU&&(E=E.attrs.path);E&&(R.along=E);return this.animate(R,e,S)}}function aY(bO,E,d,bN,bM,bI){var bJ=3*E,bL=3*(bN-E)-bJ,b=1-bJ-bL,bH=3*d,bK=3*(bM-d)-bH,bP=1-bH-bK;function S(bQ){return((b*bQ+bL)*bQ+bJ)*bQ}function e(bQ,bS){var bR=R(bQ,bS);return((bP*bR+bK)*bR+bH)*bR}function R(bQ,bX){var bW,bV,bT,bR,bU,bS;for(bT=bQ,bS=0;bS<8;bS++){bR=S(bT)-bQ;if(aq(bR)<bX){return bT}bU=(3*b*bT+2*bL)*bT+bJ;if(aq(bU)<0.000001){break}bT=bT-bR/bU}bW=0;bV=1;bT=bQ;if(bT<bW){return bW}if(bT>bV){return bV}while(bW<bV){bR=S(bT);if(aq(bR-bQ)<bX){return bT}if(bQ>bR){bW=bT}else{bV=bT}bT=(bV-bW)/2+bW}return bT}return e(bO,1/(200*bI))}bc.onAnimation=function(b){this._run=b||0;return this};bc.animate=function(b0,bQ,bP,R){var d=this;d.timeouts=d.timeouts||[];if(aI.is(bP,"function")||!bP){R=bP||null}if(d.removed){R&&R.call(d);return d}var bU={},e={},S=false,bL={};for(var bR in b0){if(b0[ag](bR)){if(am[ag](bR)||d.paper.customAttributes[ag](bR)){S=true;bU[bR]=d.attr(bR);(bU[bR]==null)&&(bU[bR]=q[bR]);e[bR]=b0[bR];switch(am[bR]){case"along":var bY=aK(b0[bR]);var bS=L(b0[bR],bY*!!b0.back);var bH=d.getBBox();bL[bR]=bY/bQ;bL.tx=bH.x;bL.ty=bH.y;bL.sx=bS.x;bL.sy=bS.y;e.rot=b0.rot;e.back=b0.back;e.len=bY;b0.rot&&(bL.r=aj(d.rotate())||0);break;case aF:bL[bR]=(e[bR]-bU[bR])/bQ;break;case"colour":bU[bR]=aI.getRGB(bU[bR]);var bT=aI.getRGB(e[bR]);bL[bR]={r:(bT.r-bU[bR].r)/bQ,g:(bT.g-bU[bR].g)/bQ,b:(bT.b-bU[bR].b)/bQ};break;case"path":var bI=V(bU[bR],e[bR]);bU[bR]=bI[0];var bN=bI[1];bL[bR]=[];for(var bX=0,bK=bU[bR][s];bX<bK;bX++){bL[bR][bX]=[0];for(var bW=1,bZ=bU[bR][bX][s];bW<bZ;bW++){bL[bR][bX][bW]=(bN[bX][bW]-bU[bR][bX][bW])/bQ}}break;case"csv":var b=bC(b0[bR])[I](a),bJ=bC(bU[bR])[I](a);switch(bR){case"translation":bU[bR]=[0,0];bL[bR]=[b[0]/bQ,b[1]/bQ];break;case"rotation":bU[bR]=(bJ[1]==b[1]&&bJ[2]==b[2])?bJ:[0,b[1],b[2]];bL[bR]=[(b[0]-bU[bR][0])/bQ,0,0];break;case"scale":b0[bR]=b;bU[bR]=bC(bU[bR])[I](a);bL[bR]=[(b[0]-bU[bR][0])/bQ,(b[1]-bU[bR][1])/bQ,0,0];break;case"clip-rect":bU[bR]=bC(bU[bR])[I](a);bL[bR]=[];bX=4;while(bX--){bL[bR][bX]=(b[bX]-bU[bR][bX])/bQ}break}e[bR]=b;break;default:b=[].concat(b0[bR]);bJ=[].concat(bU[bR]);bL[bR]=[];bX=d.paper.customAttributes[bR][s];while(bX--){bL[bR][bX]=((b[bX]||0)-(bJ[bX]||0))/bQ}break}}}}if(!S){var bO=[],E;for(var b1 in b0){if(b0[ag](b1)&&bf.test(b1)){bR={value:b0[b1]};b1=="from"&&(b1=0);b1=="to"&&(b1=100);bR.key=T(b1,10);bO.push(bR)}}bO.sort(bm);if(bO[0].key){bO.unshift({key:0,value:d.attrs})}for(bX=0,bK=bO[s];bX<bK;bX++){by(bO[bX].value,d,bQ/100*bO[bX].key,bQ/100*(bO[bX-1]&&bO[bX-1].key||0),bO[bX-1]&&bO[bX-1].value.callback)}E=bO[bO[s]-1].value.callback;if(E){d.timeouts.push(setTimeout(function(){E.call(d)},bQ))}}else{var bV=aI.easing_formulas[bP];if(!bV){bV=bC(bP).match(c);if(bV&&bV[s]==5){var bM=bV;bV=function(b2){return aY(b2,+bM[1],+bM[2],+bM[3],+bM[4],bQ)}}else{bV=function(b2){return b2}}}X.push({start:b0.start||+new Date,ms:bQ,easing:bV,from:bU,diff:bL,to:e,el:d,t:{x:0,y:0}});aI.is(R,"function")&&(d._ac=setTimeout(function(){R.call(d)},bQ));X[s]==1&&setTimeout(bu)}return this};bc.stop=function(){for(var b=0;b<X.length;b++){X[b].el.id==this.id&&X.splice(b--,1)}for(b=0,ii=this.timeouts&&this.timeouts.length;b<ii;b++){clearTimeout(this.timeouts[b])}this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};bc.translate=function(b,d){return this.attr({translation:b+" "+d})};bc[a0]=function(){return"Rapha\xebl\u2019s object"};aI.ae=X;var ah=function(b){this.items=[];this[s]=0;this.type="set";if(b){for(var d=0,e=b[s];d<e;d++){if(b[d]&&(b[d].constructor==aU||b[d].constructor==ah)){this[this.items[s]]=this.items[this.items[s]]=b[d];this[s]++}}}};ah[bE][k]=function(){var E,b;for(var d=0,e=arguments[s];d<e;d++){E=arguments[d];if(E&&(E.constructor==aU||E.constructor==ah)){b=this.items[s];this[b]=this.items[b]=E;this[s]++}}return this};ah[bE].pop=function(){delete this[this[s]--];return this.items.pop()};for(var H in bc){if(bc[ag](H)){ah[bE][H]=(function(b){return function(){for(var d=0,e=this.items[s];d<e;d++){this.items[d][b][bB](this.items[d],arguments)}return this}})(H)}}ah[bE].attr=function(d,S){if(d&&aI.is(d,a7)&&aI.is(d[0],"object")){for(var b=0,R=d[s];b<R;b++){this.items[b].attr(d[b])}}else{for(var e=0,E=this.items[s];e<E;e++){this.items[e].attr(d,S)}}return this};ah[bE].animate=function(d,b,S,bI){(aI.is(S,"function")||!S)&&(bI=S||null);var R=this.items[s],e=R,bJ,bH=this,E;bI&&(E=function(){!--R&&bI.call(bH)});S=aI.is(S,af)?S:E;bJ=this.items[--e].animate(d,b,S,E);while(e--){this.items[e]&&!this.items[e].removed&&this.items[e].animateWith(bJ,d,b,S,E)}return this};ah[bE].insertAfter=function(d){var b=this.items[s];while(b--){this.items[b].insertAfter(d)}return this};ah[bE].getBBox=function(){var b=[],S=[],d=[],E=[];for(var e=this.items[s];e--;){var R=this.items[e].getBBox();b[k](R.x);S[k](R.y);d[k](R.x+R.width);E[k](R.y+R.height)}b=bi[bB](0,b);S=bi[bB](0,S);return{x:b,y:S,width:m[bB](0,d)-b,height:m[bB](0,E)-S}};ah[bE].clone=function(e){e=new ah;for(var b=0,d=this.items[s];b<d;b++){e[k](this.items[b].clone())}return e};aI.registerFont=function(d){if(!d.face){return d}this.fonts=this.fonts||{};var E={w:d.w,face:{},glyphs:{}},e=d.face["font-family"];for(var bH in d.face){if(d.face[ag](bH)){E.face[bH]=d.face[bH]}}if(this.fonts[e]){this.fonts[e][k](E)}else{this.fonts[e]=[E]}if(!d.svg){E.face["units-per-em"]=T(d.face["units-per-em"],10);for(var R in d.glyphs){if(d.glyphs[ag](R)){var S=d.glyphs[R];E.glyphs[R]={w:S.w,k:{},d:S.d&&"M"+S.d[bs](/[mlcxtrv]/g,function(bI){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[bI]||"M"})+"z"};if(S.k){for(var b in S.k){if(S[ag](b)){E.glyphs[R].k[b]=S.k[b]}}}}}}return d};aZ.getFont=function(bI,bJ,d,E){E=E||"normal";d=d||"normal";bJ=+bJ||{normal:400,bold:700,lighter:300,bolder:800}[bJ]||400;if(!aI.fonts){return}var R=aI.fonts[bI];if(!R){var e=new RegExp("(^|\\s)"+bI[bs](/[^\w\d\s+!~.:_-]/g,aP)+"(\\s|$)","i");for(var b in aI.fonts){if(aI.fonts[ag](b)){if(e.test(b)){R=aI.fonts[b];break}}}}var S;if(R){for(var bH=0,bK=R[s];bH<bK;bH++){S=R[bH];if(S.face["font-weight"]==bJ&&(S.face["font-style"]==d||!S.face["font-style"])&&S.face["font-stretch"]==E){break}}}return S};aZ.print=function(R,E,b,bI,bJ,bS,d){bS=bS||"middle";d=m(bi(d||0,1),-1);var bO=this.set(),bR=bC(b)[I](aP),bP=0,bM=aP,bT;aI.is(bI,b)&&(bI=this.getFont(bI));if(bI){bT=(bJ||16)/bI.face["units-per-em"];var e=bI.face.bbox.split(a),bH=+e[0],bK=+e[1]+(bS=="baseline"?e[3]-e[1]+(+bI.face.descent):(e[3]-e[1])/2);for(var bN=0,S=bR[s];bN<S;bN++){var bL=bN&&bI.glyphs[bR[bN-1]]||{},bQ=bI.glyphs[bR[bN]];bP+=bN?(bL.w||bI.w)+(bL.k&&bL.k[bR[bN]]||0)+(bI.w*d):0;bQ&&bQ.d&&bO[k](this.path(bQ.d).attr({fill:"#000",stroke:"none",translation:[bP,0]}))}bO.scale(bT,bT,bH,bK).translate(R-bH,E-bK)}return bO};aI.format=function(d,e){var b=aI.is(e,a7)?[0][bw](e):arguments;d&&aI.is(d,af)&&b[s]-1&&(d=d[bs](bn,function(R,E){return b[++E]==null?aP:b[E]}));return d||aP};aI.ninja=function(){r.was?(aQ.Raphael=r.is):delete Raphael;return aI};aI.el=bc;aI.st=ah[bE];r.was?(aQ.Raphael=aI):(Raphael=aI)})();var RotaryMaps=window.RotaryMaps=(function(k){var a={},h=0,d=0,c=0.0001;a.log=function(){if(window.console){console.log(arguments)}};a.callable=function(l){return typeof l=="function"};a.isObject=function(l){return typeof l=="object"};a.convert=function(m,p,l,n,o){o=parseFloat(Math.min(p,Math.max(m,o)));return parseFloat(o-m)/parseFloat(p-m)*(n-l)+l};a.extend=function(){var n={},l=0,m=arguments.length;for(;l<m;l++){a.each(arguments[l],function(p,o){if(p&&a.isObject(p)&&!a.callable(p)){n[o]=a.extend(n[o]&&a.isObject(n[o])?n[o]:{},p)}else{n[o]=p}})}return n};a.config=function(m,n){if(m instanceof Object){for(var l in m){a.config(l,m[l])}return}switch(m){case"fudge":c=n;break;case"logging":if(!n){a.log=function(){}}break;case"raphael":k=n;break;default:a.log(m,"Not available")}};a.uniqueDataId=function(){return d++};a.each=function(l,n){for(var m in l){n(l[m],m)}};a.inheritFrom=function(m){function l(){}l.prototype=m.prototype||m;return new l()};a.autoController=function(o,m){var l=new a.Controller(m),n=new a.SvgMap(o);return l.addMap(n)};a.auto={bubble:function(n,m,l){}};(function(){var l=false,m=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;a.Class=function(){};a.Class.extend=function(q){var r=this.prototype;l=true;var p=new this();l=false;for(var o in q){p[o]=typeof q[o]=="function"&&typeof r[o]=="function"&&m.test(q[o])?(function(s,t){return function(){var v=this._super;this._super=r[s];var u=t.apply(this,arguments);this._super=v;return u}})(o,q[o]):q[o]}function n(){if(!l&&this.init){this.init.apply(this,arguments)}}n.prototype=p;n.constructor=n;n.extend=arguments.callee;return n}})();var e={};e.CIRCLE={cursor:"pointer",fill:"#ff0000",opacity:1,stroke:"#333","stroke-width":1,emboss:true};e.CLUSTER={enable_dots:true,enable_grid:false,combine:function(m,l){return m+l},radius_from_value:function(l){return l},color:"#fc8d59",stroke:"#000",hover_color:"#ffffbf",active_color:"#ffffbf",opacity:0.8,grid_color:"#5e4fa2",grid_size:24,onclick:function(l){a.log("onclick")}};e.CHOROPLETH={color_scheme:"spectral",reverse_colors:false};e.BUBBLE={radius:function(l){return l&&l.val?l.val:1},color_by:"value",fade_in:null,fade_out:{after:null,duration:null},marker:null,circle:e.CIRCLE};e.CONTROLLER={};e.REALTIME={expected_delay:60000};e.TIMELINE={something:true};a.GRADIENTS={spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],stoplight:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],sunrise:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],floyd:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],majesty:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],stoic:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],meadow:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],mars:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],jupiter:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],neptune:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],pluto:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],ink:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],reef:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]};a.COLOR_BLOCKS={oneset:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],twoset:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],threeset:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],falcon:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"]};a.colorScheme=function(n){var o=null,l=null,p={},m,q;if(a.GRADIENTS.hasOwnProperty(n)){return a.gradientColorScheme(n)}else{if(a.COLOR_BLOCKS.hasOwnProperty(n)){return a.blockColorScheme(n)}else{throw"Invalid color scheme"}}};a.gradientColorScheme=function(n){var q=null,o=null,l=null,p={},m,r;if(a.GRADIENTS.hasOwnProperty(n)){q=a.GRADIENTS[n]}else{throw"Invalid color scheme."}for(m in q){if(o===null||m<o){o=m}if(l===null||m>l){l=m}}for(m in q){r=a.convert(o,l,0,1,m);p[r]=q[m]}return function(v,u){var s=null,w=null;if(v-c<0){for(var t in p){return p[t]}}else{if(v+c>1){for(var t in p){s=p[t]}return s}else{for(var t in p){if(t==v){return v}if(v>t){s=t;continue}else{w=a.convert(s,t,0,1,v);return s}}return s}}}};a.blockColorScheme=function(m){var l=a.COLOR_BLOCKS[m];return function(n){var o=parseInt(Math.floor(a.scale(0,1,0,l.length+1,n)));return l[Math.max(0,Math.min(o,l.length))]}};a.applySvgStyle=function(n,l,m){var p=null,o=a.extend(l,m||{});if(o.emboss){p=k.rgb2hsb(o.fill);o.fill="90-hsb("+p.h+","+p.s+","+Math.max(0,p.b-0.2)+")-"+o.fill}n.attr(o)};a.GMAP_STYLES={};a.GMAP_STYLES.Neutral=[{featureType:"administrative",elementType:"all",stylers:[{saturation:-100}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100}]},{featureType:"water",elementType:"all",stylers:[{saturation:-100}]}];a.GMAP_STYLES.Subtle=[{featureType:"all",elementType:"all",stylers:[{saturation:-47}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{saturation:-68},{visibility:"on"},{lightness:50}]},{featureType:"road.local",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"transit",elementType:"all",stylers:[]}];a.setGMapStyle=function(o,m){var l={name:m},n=new google.maps.StyledMapType(a.GMAP_STYLES[m],l);o.mapTypes.set(m,n);o.setMapTypeId(m)};a.Controller=a.Class.extend({init:function(o,l,n,m){this.options=a.extend(e.CONTROLLER,m);this.map=o;this.datasource=l;this.layer=n;this.datasource.addController(this);this.layer.setMap(this.map).setController(this)},refresh:function(){var l=this.layer;a.each(this.datasource.getDataItems(),function(m){l.addDataItem(m)});return this}});a.Realtime=a.Controller.extend({init:function(o,l,n,m){this._super(o,l,n,a.extend(e.REALTIME,m));setInterval(this.deleteExpired,5000)},updateOne:function(l){var m=this,n=this.convertTimeIntoFutureMs(l.timestamp);window.setTimeout(function(){m.layer.addDataItem(l)},n);return this},updateMany:function(l){var m=this;a.each(l,function(n){m.updateOne(n)});return this},convertTimeIntoFutureMs:function(m){var l=new Date().getTime();return Math.max(0,(m+this.options.expected_delay)-l)},deleteExpired:function(){}});a.Datasource=a.Class.extend({init:function(l){this.data=l&&this.formatData(l)||[];this.controllers=[];this.dirty=true;this.stats={};this.analyze()},addController:function(l){this.controllers.push(l)},load:function(){a.each(this.controllers,function(l){l.refresh()})},push:function(l){this.data.push(this.formatDataItem(l));a.each(this.controllers,function(m){m.updateOne(l)});return this},pushMany:function(m){var l=this.formatData(m);i=0;ii=l.length;for(;i<ii;i++){this.data.push(l[i])}a.each(this.controllers,function(n){n.updateMany(l)});return this},formatData:function(n){var l=[],m=this;a.each(n,function(o){m.formatDataItem(o);l.push(o)});return l},formatDataItem:function(l){l.__id=a.uniqueDataId();l.__store=this;l.__relative_value=function(){a.convert(that.min(),that.max(),0,1,data_item.val)}},getDataItems:function(){return this.data},analyze:function(l){if(this.dirty||l){this.stats.max=this.reduce(function(m,n){return(n===null||m.val>n)?m.val:n});this.stats.min=this.reduce(function(m,n){return(n===null||m.val<n)?m.val:n});this.dirty=false}return this},reduce:function(n){var l=null,m;for(m in this.data){l=n(this.data[m],l)}return l}});a.Map=a.Class.extend({init:function(l,m){this.id=a.map_counter++;this.container=l;this.listeners=[];this.controllers=[];this.options=m},attach:function(){var m,l,n;if(arguments[0] instanceof a.Controller){m=arguments[0]}else{l=arguments[0];n=arguments[1];m=new a.Controller(this,l,n)}this.controllers.push(m);return this},bind:function(m,l){if(!this.listeners[m]){this.listeners[m]=[]}this.listeners[m].push(l);return this},trigger:function(o){var l=Array.prototype.slice.call(arguments,1);if(this.listeners[o]){for(var m in this.listeners[o]){var n=this.listeners[o][m];n.apply(n,l)}}return this},addMarker:function(l){},removeMarker:function(l){},circle:function(l){}});a.RaphaelMap=a.Map.extend({init:function(l,m){this._super(l,m);this.width=this.options.width;this.height=this.options.height;this.paper=k(l,this.width,this.height)},bind:function(m,l){if(!this.listeners[m]){this.listeners[m]=[]}this.listeners[m].push(l);return this},handle:function(n){var l=arguments.slice(1);if(this.listeners[n]){for(var m in this.listeners[n]){this.listeners[n][m](l)}}return this},layer:function(l){var n=l.listensOn();l.setMap(this);for(var m in n){this.bind(n[m],l[n[m]])}return this},circle:function(o,n,l,m){return new a.marks.raphael.Circle(this,this.lngToX(n),this.latToY(o),l)},removeMarker:function(l){l.remove();return this},lngToX:function(l){return a.convert(-180,180,0,this.width,l)},latToY:function(l){return this.height-a.convert(-90,90,0,this.height,l)}});a.GMap=a.Map.extend({init:function(l){this._super(l)},addMarker:function(l){return l},circle:function(o,n,l,m){return this.addMarker(new a.marks.gmap.Circle(this,o,n,l))},removeMarker:function(l){l.gmap_marker.setMap(null);l.gmap_marker=null;l=null;return this}});a.GMap2=a.Map.extend({init:function(l){var m=this;this._super(l);GEvent.addListener(l,"zoomend",function(n,o){m.trigger("zoomEnd",n,o)});GEvent.addListener(l,"moveend",function(){m.trigger("moveEnd")});GEvent.addListener(l,"maptypechanged",function(){m.trigger("mapTypeChanged")})},colorize:function(m,n){var l=[];l.push([new GLatLng(-85,0),new GLatLng(85,0),new GLatLng(85,90),new GLatLng(-85,90)]);l.push([new GLatLng(-85,90),new GLatLng(85,90),new GLatLng(85,180),new GLatLng(-85,180)]);l.push([new GLatLng(-85,180.000001),new GLatLng(85,180.000001),new GLatLng(85,270),new GLatLng(-85,270)]);l.push([new GLatLng(-85,270),new GLatLng(85,270),new GLatLng(85,360),new GLatLng(-85,360)]);for(var o in l){this.container.addOverlay(new GPolygon(l[o],null,0,0,m,n))}},addMarker:function(l){this.container.addOverlay(l.getGMapMarker());return l},circle:function(o,n,l,m){return this.addMarker(new a.marks.gmap2.Circle(this,o,n,l))},removeMarker:function(l){l.gmap_marker.remove();l=null;return this}});a.marks={};a.Mark=a.Class.extend({init:function(l,m){this.map=l;this.node=null},remove:function(){this.map.removeMarker(this)},applyStyle:function(l,m){a.applySvgStyle(this.node,l,m)}});a.marks.raphael={};a.marks.raphael.Mark=a.Mark.extend({init:function(l){this._super(l)}});a.marks.raphael.Circle=a.marks.raphael.Mark.extend({init:function(n,m,o,l){this._super(n);this.node=this.map.paper.circle(m,o,l)}});a.marks.gmap={};a.marks.gmap.Mark=a.Mark.extend({init:function(l){this._super(l);this.gmap_marker=null;g()},getGMapMarker:function(){return this.gmap_marker}});a.marks.gmap.Circle=a.marks.gmap.Mark.extend({init:function(o,n,m,l){this._super(o);this.gmap_marker=new j(o.container,n,m,l*2+2,l*2+2);this.node=this.gmap_marker.paper.circle(l+1,l+1,l)}});var j=null;function g(){if(j!==null){return}j=function(o,p,m,n,l){this.bounds_=null;this.map_=null;this.div_=null;this.image_=null;this.point=new google.maps.LatLng(p,m);this.width=n;this.height=l;this.div_=document.createElement("div"),this.div_.style.position="absolute";this.paper=k(this.div_,n,l);this.setMap(o)};j.prototype=new google.maps.OverlayView();j.prototype.onAdd=function(){var l=this.getPanes();l.overlayLayer.appendChild(this.div_)};j.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_);this.div_=null};j.prototype.draw=function(){var n,m,l=this.getProjection();n=l.fromLatLngToDivPixel(this.point),m=parseInt(this.div_.clientHeight);this.div_.style.left=(n.x-(this.width*0.5))+"px";this.div_.style.top=(n.y+(this.height*0.5)-m)+"px"}}a.marks.gmap2={};a.marks.gmap2.Mark=a.Mark.extend({init:function(l){this._super(l);this.gmap_marker=null;f()},getGMapMarker:function(){return this.gmap_marker}});a.marks.gmap2.Circle=a.marks.gmap2.Mark.extend({init:function(o,n,m,l){this._super(o);this.gmap_marker=new b(n,m,l*2+2,l*2+2);this.node=this.gmap_marker.paper.circle(l+1,l+1,l)}});var b=null;function f(){if(b!==null){return}b=function(o,m,n,l){this.point=new GLatLng(o,m);this.width=n;this.height=l;this.div_=document.createElement("div"),this.div_.style.position="absolute";this.paper=k(this.div_,n,l)};b.prototype=a.inheritFrom(GOverlay);b.prototype.initialize=function(l){this.map_=l;l.getPane(G_MAP_MARKER_PANE).appendChild(this.div_)};b.prototype.remove=function(){this.div_.parentNode.removeChild(this.div_);this.div_=null};b.prototype.copy=function(){return new b(this.point,width,height)};b.prototype.redraw=function(m){var n,l;if(m){n=this.map_.fromLatLngToDivPixel(this.point),l=parseInt(this.div_.clientHeight);this.div_.style.left=(n.x-(this.width*0.5))+"px";this.div_.style.top=(n.y+(this.height*0.5)-l)+"px"}};b.prototype.setPoint=function(l){this.point=l;this.redraw(true)}}a.Layer=a.Class.extend({init:function(l){this.options=l;this.map=null;this.controller=null;this.listeners=["moveEnd","zoomEnd"]},getListeners:function(){return this.listeners},setController:function(l){this.controller=l},setMap:function(m){var l=this;this.map=m;a.each(this.listeners,function(n){m.bind(n,l[n])});return this},addDataItem:function(l){},removeDataItem:function(l){},moveEnd:function(){},zoomEnd:function(l,m){}});a.Bubble=a.Layer.extend({init:function(l){this._super(a.extend(e.BUBBLE,l));this.markers={}},addDataItem:function(s){var q=0,o=0,r=null,p=a.extend(this.options.circle),n=p.opacity,l=a.callable(this.options.radius)?this.options.radius(s):this.options.radius,m=this.map.circle(s.lat,s.lng,l);p.opacity=this.options.fade_in?0:p.opacity;m.applyStyle(p);this.markers[s.__id]=m;if(this.options.fade_in){m.node.animate({opacity:n},this.options.fade_in)}if(this.options.marker&&a.callable(this.options.marker)){this.options.marker(this,m,s)}if(this.options.fade_out){if(this.options.fade_out instanceof Object){q=this.options.fade_out.after?this.options.fade_out.after:0;o=this.options.fade_out.duration?this.options.fade_out.duration:0}else{o=parseInt(this.options.fade_out)}r=function(){m.node.animate({opacity:0},o,function(){m.remove()})};if(q){setTimeout(r,q)}else{if(o){r()}}}return this},removeDataItem:function(l){this._super(l);this.map.removeMarker(this.markers[l]);delete this.markers[l];return this}});return a})(Raphael.ninja());